<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>[PHP] Découper une image</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title"><span class="tid_forumTag tid_minor">Discussion</span>[PHP] Découper une image</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 15 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Yop, ça fait plusieurs heures que je galère et pourtant, je pensais y arriver sans soucis... Je pense avoir toutes les fonctions dont j'ai besoin et je saurai certainement gérer le reste. C'est au moment de couper l'image que je n'y arrive pas.</p><p>J'ai pris en exemple un code python qui le fait de cette façon (cf. <a target="_blank" href="http://stackoverflow.com/questions/14593441/how-to-reorder-pixels">code original</a>) :</p><pre>BLOCKLEN = 64 
xblock = width / BLOCKLEN
yblock = height / BLOCKLEN
blockmap = [(xb*BLOCKLEN, yb*BLOCKLEN, (xb+1)*BLOCKLEN, (yb+1)*BLOCKLEN)
 for xb in xrange(xblock) for yb in xrange(yblock)]</pre><p>Sachant que width et height sont les informations sur la taille de l'image source. <br>Pour dire vrai, j'ai toujours galéré avec tout ce qui touche aux arrays. J'ai essayé un tas de trucs et mon dernier essai ressemble à ça :</p><pre># Taille d'un block en pixel
$blocklen = 64;

#On sélectionne l'image et on prend les informations avec getimagesize()
$img = $FILES['imgsource'];
list($width, $height, $type, $attr) = getimagesize($img);

#Type de l'image
if ($type == 3) {
 $image = imagecreatefrompng($img);
} else if ($type == 2) {
 $image = imagecreatefromjpeg($img);
}

#On découpe l'image
$xblock = $width / $blocklen;
$yblock = $height / $blocklen;

for($xb = 0, $i=0; $xb &lt;= $xblock; $xb++, $i++) {
 $blockmap1[]= [$xb*$blocklen, ($xb+1)*$blocklen];
}

for($yb = 0, $i=0; $yb &lt;= $xblock; $yb++, $i++) {
 $blockmap2[]= [$yb*$blocklen, ($yb+1)*$blocklen];
}

$blockmapFinal = array_merge_recursive($blockmap1, $blockmap2);</pre><p>J'ai essayé un peu tout, j'en suis arrivé à séparer le tout en deux for...<br><em><a target="_blank" href="http://php.net/manual/fr/function.array-merge-recursive.php">array_merge_recursive()</a></em> devrait réunir le tout dans une array pour avoir chaque fois les quatre informations dont j'ai besoin dans une entrée mais, ils ne fusionnent pas les deux array de la même façon qu'indiqué sur php.net, voire pas du tout en fait... <br>Le tout s'ajoute à la queuleuleu dans l'array finale pour me donner 8 sous-tableaux...<br>Quand, je mets 200 pour la taille à widht et height j'obtiens <a target="_blank" href="http://pastebin.com/C3PY1K9k">ça </a>avec ce code, mais je souhaite avoir <a target="_blank" href="http://pastebin.com/rvWaFGHS">ça</a>.<br>Quelqu'un aurait-il un peu de temps pour moi ? <img src="../../../../gfx/square/calim.png" alt=":calim:" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Parce que toi tu utilises des clés numériques. Sur php.net, les clés sont des chaines. Avec des clés numériques, ça marche moins bien selon <a target="_blank" href="https://www.google.fr/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=array_merge_recursive+numeric+keys">google</a></p><p>Mais plutôt que d'utiliser cette fonction, ne serait-il pas plus simple de combiner les for</p><pre>for($xb = 0; $xb &lt; $xblock; $xb++) {
 for($yb = 0; $yb &lt; $yblock; $yb++) {
 $blockmap[] = [$xb*$blocklen,$yb*$blocklen, ($xb+1)*$blocklen, ($yb+1)*$blocklen];
 }
}
</pre><p>J'ai changé xblock pour yblock dans ton deuxième for car ça a l'air d'être une erreur, j'ai remplacé &lt;= par &lt; car sinon tu va sortir de l'image et j'ai viré le $i car je ne sais pas à quoi il sert ^^.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je regarde ça une fois chez moi, mais j'avais lu que faire un double for n'était pas recommandé... D'ailleurs l'opération va se répéter deux fois avec ta double boucle non ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je ne sais pas où tu as lu ça mais il n'y a pas de contre-indication en PHP à utiliser des boucles imbriqués. D'ailleurs, j'y connais rien en Python, mais même si l'écriture est plus courte, le script Python a bien l'air de faire deux boucles tout pareil.</p><p>En fait chaque itération de la première boucle correspond à une colonne et la deuxième boucle correspond à une ligne.</p><p>Donc on fait la colonne 1 ligne par ligne puis la colonne 2 ligne par ligne etc.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>C'est sûr qu'avec tes explicaitons ça a l'air plus simple, au début je voulais aussi faire deux boucles mais j'ai lu je ne sais où sur un forum anglais que c'était "pas propre"... Je te tiens au courant, merci !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bon, voici le code que j'ai pour le <a target="_blank" href="http://pastebin.com/W2frus8R">moment</a>.<br>Je n'ai aucune erreur sur ma page php en la chargeant, du coup je ne comprends pas trop pourquoi mon fichier /upload/ est vide...<br>J'utilise <a target="_blank" href="http://php.net/manual/fr/function.imagecopyresampled.php">imagecopyresampled()</a> pour copier les bouts de l'image originale sur la nouvelle. Je ne crois pas avoir fait d'erreur.</p><p>Sachant que :</p><pre>$blockmap[] = [$xb*$blocklen,$yb*$blocklen, ($xb+1)*$blocklen, ($yb+1)*$blocklen];</pre><p>On est d'accord que <em>$xb*$blocklen</em> représente un point X et <em>$yb*$blocklen</em> un point Y. Du coup si on suit le raisonnement :</p><pre>$xb*$blocklen &lt;=&gt; $blockmap[$key][0]
$yb*$blocklen &lt;=&gt; $blockmap[$key][1]</pre><p>C'est la même chose pour avoir les coordonnées des nouveaux points, puisqu'on a mélangé les bouts de l'image avec <a target="_blank" href="http://php.net/search.php?show=quickref&amp;pattern=shuffle">shuffle()</a> :</p><pre>$value[0] &lt;=&gt; le X sur la nouvelle image
$value[1] &lt;=&gt; le Y sur la nouvelle image</pre><p>Du coup, si je veux par exemple la largueur du premier bout de l'image source, c'est bien :</p><pre>$blockmap[$key][2]-$blockmap[$key][0]</pre><p>Sachant que :</p><pre>($xb+1)*$blocklen &lt;=&gt; $blockmap[$key][2]
($yb+1)*$blocklen &lt;=&gt; $blockmap[$key][3]</pre><p>Donc <em>($xb+1)*$blocklen-$xb*$blocklen</em> me donnera la largueur, par exemple avec 200x200 et le premier block : 64-0.</p><p>Du coup, je comprends pas trop le problème, ou alors comme avant, je me prends la tête pour rien ?... <img src="../../../../gfx/square/anim.png/oups.gif" alt=":anim_oups:" class="tid_ico"> Ma démarche est peut-être fausse ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_6">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>A mon avis, si tu n'as pas d'erreur c'est que tu ne les a pas activées car <a target="_blank" href="http://php.net/manual/en/function.getimagesize.php">getimagesize </a>prend uniquement une string en entrée. (ça devrait te faire un beau warning)</p><p>Parce que sinon ça marche bien :<br><a href="http://badconker.fr/keltah.php" target="_blank">http://badconker.fr/keltah.php</a></p><p>Le gist:<br><a href="https://gist.github.com/badconker/25349b1d073520e9c4e0" target="_blank">https://gist.github.com/badconker/253...</a></p><p>(La largeur et la hauteur des "bouts d'image" on l'a déjà, c'est $blocklen, inutile de le recalculer dans l'autre sens 36 fois ^^)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_7">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Roh mais quel boulet, j'avais oublié d'activer ça... Ça me dépanne pour d'autres trucs du coup... Faut vraiment que je dorme, je vais voir si j'arrive à faire marcher le tout et je te dirai si c'est bon, merci encore <img src="../../../../gfx/square/anim.png/sifflote.gif" alt=":-&quot;" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_8">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bon et bien ça marche parfaitement, j'ai réussi à l'intégrer, par contre j'ai changé le format final en jpg, c'est moins lourd... Question bête comme ça, tu saurais ce qu'il faut vérifier pour être sûr que l'image n'est pas compromise, à part l'extension ? J'ai vu quelques pistes mais je n'ai pas trop compris, merci d'avance !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_9">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><img src="../../../../gfx/square/smile.png" alt=":)" class="tid_ico"></p><p>Pour ta question tu peux essayer <a target="_blank" href="http://www.php.net/manual/en/function.exif-imagetype.php">exif-imagetype</a> qui a l'air de faire l'affaire. Tu as dû tomber dessus si tu as fait une recherche google.</p><p>Sinon, il ne faut jamais se baser sur une extension pour vérifier un type de fichier ou tester sa validité, elle ne reflète pas forcément la nature du fichier. Un fichier texte peut s'appeler monimage.jpg et une image peut s'appeler montexte.txt.</p><p>Un filtre sur l'extension ne permet que de s'assurer d'avoir un fichier avec une extension correcte mais pas du tout de vérifier de quel type de fichier il s'agit.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_10">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>T'es un dieu, merci <img src="http://mush.twinoid.com/img/icons/ui/lp.png" alt=":mush_hp:" class="tid_ico"> ! J'étais tombé dessus mais je ne pensais pas que ça serait suffisant, je vais voir ça puis je pense que je reviendrai pour dire si ça marche ou pas, et je laisserai couler le topic !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_11">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Pas de soucis, pour une fois qu'il y a des questions de PHP ici ^^.</p><p>Juste par compromise, tu voulais bien dire non corrompu ? Pas genre y a un virus caché dedans ? Car là, la fonction ne ne verra pas la différence.</p><p>Sinon pendant tes recherches tu tomberas très souvent sur Stackoverflow. Vu le nombre de personnes qui passent dessus, une mauvaise réponse sera très vite "downvoté", et une réponse ayant eu quelques "upvotes" et provenant d'une personne ayant un beau score peut en général être considérée comme fiable. Comme ici par exemple <a href="http://stackoverflow.com/questions/7393419/what-is-the-best-and-fastest-way-to-check-if-the-image-is-valid-in-php." target="_blank">http://stackoverflow.com/questions/73...</a> (Faut pas copier coller les réponses non plus, mieux vaut toujours regarder la doc pour savoir exactement ce que le code fait)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_12">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Hm, je récupère en fait l'image depuis une url.<br>Du coup avec la fonction, je vérifie de la sorte :</p><pre>imagejpeg($name.".jpg");
if(exif_imagetype($name.".jpg") !== IMAGETYPE_JPEG) {
 unset($image);
 unlink($name.".jpg");
}</pre><p>Je ne peux pas faire autrement puisqu'il faut un "filename" <em>string</em>. Du coup il faut que je l'héberge pour la vérifier, mais c'est pas sécurisé non ? Puisque si elle est compromise, elle restera un instant, même si très court, sur le serveur. T'as une idée ?</p><p><strong>Edit : </strong>Hm, je veux en fait être sûr que ça soit une image, et pas autre chose...</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_13">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oui mais le filename peut aussi être une url.</p><p>Si on considère que $name.'.jpg' est une url. Juste ton if suffit, tout ce qu'il ya autour est inutile <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"> (en plus il doit manquer des bout car là ça ne veut pas dire grand chose : imagejpeg affiche une image et prend une ressource comme entrée pas une string, la variable $image n'est pas définie, et unlink va au mieux effacer l'image source, au pire il ne fera rien si l'image est distante)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_14">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oups, mal copié collé/édité.<br>En fait :</p><pre>imagejpeg($result, "upload/".$idunique.".jpg");</pre><p>Du coup je ne comprends pas pourquoi mon if n'est pas suffisant, faire plus court ne me vérifiera pas ce que je veux...<br>Et oui, en soit $image contient l'image source dans la variable, donc la supprimer ou pas ne change rien car je traite le code autour de cette image, mais je ne l'enregistre pas directement.</p><p>En gros, je suis obligé d'enregistrer l'image, avant la vérification, pour la vérifier, or si elle est corrompue, elle sera présente sur le serveur, même si c'est pendant un laps de temps, tu vois le problème ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_15">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Pardon j'ai cru que le if était un ==.</p><p>Donc je me corrige, pour vérifier que ton image est bien un jpeg :</p><pre>$url = 'http://example.com/tonimage.jpg';
if(exif_imagetype($url) == IMAGETYPE_JPEG) {
//ici le traitement de l'image
}
</pre>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_16">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bon j'ai fait comme ça du coup, oui, merci. Assez bizarre, l'éditeur de texte arrive pas à relier deux <strong>{</strong> à leurs <strong>}</strong> mais aucunes erreurs... Pareil pour deux sites vérifitant la syntax. Les codes d'erreus s'affichent bien avec les bons if... Du coup j'espère que c'est juste le logiciel qui ne sait pas trop où donner de la tête, ou mon code est trop sale.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_17">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Si tu donnes ton code je peux peut être te dire d'où vient le soucis <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p><p>Par rapport à ce que j'ai dit :<br><cite>Sinon, il ne faut jamais se baser sur une extension pour vérifier un type de fichier ou tester sa validité, elle ne reflète pas forcément la nature du fichier. Un fichier texte peut s'appeler monimage.jpg et une image peut s'appeler montexte.txt.<br><br>Un filtre sur l'extension ne permet que de s'assurer d'avoir un fichier avec une extension correcte mais pas du tout de vérifier de quel type de fichier il s'agit.</cite></p><p>Par contre pour des raisons de sécurité il faut bien entendu toujours vérifier l'extension (ou l'écraser) pour éviter de se retrouver avec des fichiers .php uploadés sur le serveur, une image (qui passe sans soucis la fonction exif_imagetype) peut contenir du code php planqué qui pourra être exécuté si le fichier se termine par .php.</p><p>Bon toi selon ton code de la page 1, tu recrées l'image en lui donnant la bonne extension donc le risque est limité mais je préfère prévenir <img src="../../../../gfx/square/smile.png" alt=":)" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_18">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Tu m'excuseras pour l'<a target="_blank" href="https://gist.github.com/Keltah/7a62fe1134d6975e9dac">indentation </a><img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"> Il n'y a rien de faux mais c'est sale quoi. Si c'était faux, le serveur le ferait pas tourner.</p><p>Oui, c'est ce que je voulais dire, comment faire pour éviter qu'une image comportant du code php, par exemple, soit hégergée par le serveur.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_19">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>En effet y a pas de soucis mise à part la variable $captcha qui n'a pas l'air d'être définie et l'indentation originale ^^.</p><p><cite>Oui, c'est ce que je voulais dire, comment faire pour éviter qu'une image comportant du code php, par exemple, soit hégergée par le serveur.</cite></p><p>Comme je l'ai dit en vérifiant le type, l'extension et en recréant l'image, le risque de te retrouver avec un malware est faible. Après c'est une question assez complexe, si tu veux aller plus loin :<br><a href="https://www.google.fr/webhp#q=php+upload+file+security" target="_blank">https://www.google.fr/webhp#q=php+upl...</a><br>Et notamment : <a href="http://web.archive.org/web/20140927111708/http://blog.insicdesigns.com/2009/01/secure-file-upload-in-php-web-applications" target="_blank">http://web.archive.org/web/2014092711...</a> (attention ya des &lt;br/&gt; dans le code PHP peut être dûs à l'archivage)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_20">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Sisi elle est définie, l'indentation bah c'est parce que le code php et au milieu d'html <img src="../../../../gfx/square/anim.png/sifflote.gif" alt=":-&quot;" class="tid_ico"></p><p>Bon je viens de regarder, je viens de modifier le chmod à 644 du dossier upload. Niveau configuration d'Apache je vois pas trop ce qu'ils veulent dire. Mais bon si tu dis que le risque est faible voire nulle, alors tant mieux !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_21">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Hm, tu sais ce que ça représente ?</p><pre>Warning: exif_imagetype(): stream does not support seeking in /public_html/outils/index.php on line 30

Warning: exif_imagetype(): stream does not support seeking in /public_html/outils/index.php on line 30

Warning: exif_imagetype(): stream does not support seeking in /public_html/outils/index.php on line 30

Warning: exif_imagetype(): stream does not support seeking in /public_html/outils/index.php on line 30</pre><p>Je ne comprends pas trop l'erreur, ça correspond à <a target="_blank" href="http://php.net/manual/fr/function.exif-imagetype.php#79283">ça </a>? Le message d'erreur n'apparaît pas avec des urls qui redirigent vers une image, ou même avec des urls de site sans images. Ça apparait avec quelques urls, si je mets le l'url de la page par exemple.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_22">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Elles n'ont pas quelque chose de particulier ces urls ? (mal formatées, gros fichier... ou un truc qui les différencie des autres ? car là comme ça je vois pas :/)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_23">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>J'ai mis des urls valides au hasard sur le internet, et ça me donnait ça.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_24">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 21 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>D'ailleurs, autre problème, avec la plupart des images, des blocs noirs apparaissent si le blocklen est trop grand. J'ai pensé à divers correctifs mais je me suis tapé une boucle infinie. Je ne pense pas qu'en découpant une image avec des carrés, je puisse avoir une image parfaite, il faudrait que je découpe l'image avec différentes formes pour combler ce que les carrés ne peuvent pas prendre. Mais l'histoire se complique et on va vite atteindre un nombre de lignes de code assez conséquent.</p><p>Ou alors je crée une troisième image, elle aura une largeur et une longueur égale, en fonction de la largeur ou la longueur de l'image source (si la longueur est plus grande, c'est celle que je prendrai pour la troisième image par exemple). J'ajouterai un background noir et je collerai l’image source dessus, puis je ferai la suite normalement... Ça donnera des carrés réguliers.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_25">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 22 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je crois que tu te compliques la vie ^^ :</p><p>Si l'image est carrée il suffit de rendre $blocklen multiple de la longueur d'un côté.</p><p>Si c'est un rectangle tu peux calculer le <a target="_blank" href="http://us2.php.net/manual/fr/function.gmp-gcd.php">plus grand diviseur commun</a> (PGCD) entre les deux côtés pour avoir la taille de $blocklen.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_26">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 22 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ouais j'aime bien me compliquer la vie... C'est trop vieux ça pour que je m'en rappelle, je vais voir ça.<br>Par contre j'avais essayé pour le mutiple hier... Je me suis tapé une boucle infinie avec 2G donnée au code...</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_27">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 22 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>T'es sûr que ça marche j'obtiens toujours des bouts noirs. <img src="../../../../gfx/square/sad.png" alt=":(" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_28">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 23 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Si la longueur de tes carrés est multiple de largeur et la hauteur de l'image, y a pas de raison qu'il y ait des bouts noirs.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_29">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 23 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je verrai ça quand j'ai le temps alors, j'ai dû me tromper quelque part, encore une fois !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_30">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 25 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bon alors, pour les carrés, je divise par 4 ! Résultat : l'image est coupée de façon régulière, mais j'ai des carrés noirs, encore, même s'ils sont maintenant réguliers.</p><p>Pour ce qui est du PGCD ! Parfaaaaaaaaaaaait, aucuns blocs noirs... Mais c'est tout petit...</p><p>Je pense que je vais jamais réussir à avoir ce que je veux.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_31">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Si tu veux des blocs plus grands, à ce stade je crois que tu n’as plus trop le choix, tu vas devoir rajouter des lignes de code <img src="../../../../gfx/square/confused.png" alt=":sq_confused:" class="tid_ico"></p><p>Tu dois gérer les deux dimensions du bloc, la hauteur et la largeur, donc tu as deux variables (disons <em>$block_w</em> et <em>$block_h</em>) au lieu d’une seule.</p><p>En plus de ça, pour les cas où la taille de l’image n’est pas multiple de la taille du bloc, tu dois gérer le bloc de raccord à la « fin » de ta boucle. Si ton code n’a pas trop évolué, c’est cette boucle-là :</p><pre>foreach ($shuffle as $key =&gt; $value) {
 …
}</pre><p><span class="tid_strike">Tu devras comparer <em>$key</em> à <em>count($shuffle)</em> pour savoir si la boucle en est à sa dernière itération (ou alors, utilise une boucle <em>for</em> classique avec <em>$i</em>), </span> et utiliser le modulo pour déterminer les dimensions des différents blocs de raccord (il y en a trois sortes : celui qui raccorde en <em>x</em>, celui qui raccorde en <em>y</em>, et celui qui raccorde en <em>x et y</em>). Au final, ça ne fait pas tant que ça de lignes à rajouter, mais il y a un peu de réflexion. Je te conseille de faire un schéma <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p><p>Courage !</p><br><p><strong>Edit:</strong> je dis des bêtises, comme les blocs sont mélangés, peu importe l’ordre de la boucle, donc ce sont les valeurs de <em>$blockmap[$key]</em> qui t’indiquent si tu es sur un bord de l’image.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_32">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_9_2683f98e_1244143.jpg" title="badconker" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1244143 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1244143/1" tid_id="1244143">badconker</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\blitz_cycle.png" title=""/> HÃ© mec, Il est oÃ¹ mon vaisseau ?</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>Pour ce qui est du PGCD ! Parfaaaaaaaaaaaait, aucuns blocs noirs... Mais c'est tout petit...</cite></p><p>Oui, il faut que tu rognes un peu l'image d'un côté ou de l'autre de façon à ce que le PGCD ne soit pas trop faible. En réfléchissant 30 secondes, une solution simple serait de rogner l'image afin qu'elle respecte un ratio standard (16/9, 16/10, 4/3 ...etc) mais il doit y avoir des dizaines de solutions mathématiques plus élégantes.</p><p><span class="tid_user tid_user_378517 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="378517">Watilin</span>, avec ta solution si j'ai bien compris, les blocks ne seront pas forcément des carrés mais peuvent être des rectangles non ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_33">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_preCite"><span class="tid_user tid_user_1244143 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="1244143">badconker</span></span><cite><span class="tid_user tid_user_378517 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="378517">Watilin</span>, avec ta solution si j'ai bien compris, les blocks ne seront pas forcément des carrés mais peuvent être des rectangles non ?</cite><br>Ouaip.<br>En y repensant, et on peut aussi appliquer cette histoire de bloc de raccord tout en gardant un bloc carré.</p><p>J’ai raté plus d’un détail hier soir, je devais être bien fatigué, désolé. En fait le plus important, c’est que dans l’image mélangée, on va avoir deux bandes de raccord, une horizontale et une verticale, qui peuvent se trouver n’importe où, pas forcément à la fin. Il faut donc tenir compte du décalage introduit par ces bandes, et l’ajouter aux paramètres <em>$value[0]</em> et <em>$value[1]</em> lors de l’appel à <em>imagecopyresampled</em>.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_34">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Hm, en gros je divise l'image avec un nombre au hasard, et grâce au modulo je peux gérer le, ou les derniers blocs noirs ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_35">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Non pas un nombre au hasard, mais un nombre que tu choisis. Ça te permet de prendre n’importe quelle taille de bloc, rectangulaire ou carré.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_36">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bah en fait, je souhaite que la taille du bloc puisse être choisie avant de mélanger l'image, donc au hasard c'est presque pareil ! Du coup ça marchera à tous les coups avec le modulo, non ? Mais comment être sûr de ne pas coller le rab sur un autre bloc déjà collé ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_37">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ben tu continues à faire comme tu fais :&nbsp;avec ton tableau <em>$shuffle</em> qui contient tes blocs mélangés, et avec les données de <em>$blockmap[$key]</em> qui t’indiquent les coordonnées du bloc.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_38">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 novembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah d'accord, je cherche toujours compliqué... Je vais voir, merci ! <img src="../../../../gfx/square/calim.png" alt=":calim:" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_39">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 22 décembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour, bonjour !<br>Je n'avais pas beaucoup de temps jusqu'à aujourd'hui, donc je viens de m'y replonger, mais bon, comme d'habitude j'ai un problème, ou alors je n'ai pas compris la démarche.</p><p>J'ai bien pris deux blocklen différentes :</p><pre>$blocklen_h = $height / 42;
$blocklen_w = $width / 42;</pre><p>Après ça, je coupe l'image :</p><pre>$xblock = $width / $blocklen_w;
$yblock = $height / $blocklen_h;</pre><p>Et je mets ça dans blockmap pour le découpage sur la nouvelle image :</p><pre>for($xb = 0; $xb &lt;= $xblock; $xb++) {
 for($yb = 0; $yb &lt;= $yblock; $yb++) {
 $blockmap[] = [$xb*$blocklen_w,$yb*$blocklen_h, ($xb+1)*$blocklen_w, ($yb+1)*$blocklen_h];
 }
}</pre><p>Jusqu'à là il n'y a pas de problème, ça paraît logique d'utiliser les nouveaux blocklen...<br>Mais c'est après que je ne bloque. Je ne comprends pas trop comment je peux déterminer la taille des trois derniers blocs avec le modulo. Même sans m'occuper de ce problème, le résultat est <a target="_blank" href="http://i.imgur.com/wwPD8PI.jpg">assez</a>...</p><p>Je dois utiliser la dernière entrée de l'array blockmap pour calculer les deniers blocks ? Du genre, je prends le dernier <em>x</em>, et rajoute son modulo et ça me donnera le point de départ du et là où je dois m'arrêter ?</p><p>Merci d'avance. <img src="../../../../gfx/square/calim.png" alt=":calim:" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_40">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 22 décembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>J'ai pas suivi le début, mais pourquoi parler de modulo ici ?</p><p>Certes, la largeur du dernier bloc c'est width%blocklen_w<br>(Si blocklen=4, et W=23, et bien 23=(23/4)*4 + 23%4, c'est la définition du "modulo" (mal nommé, puisque c'est l'opérateur "reste", et non "modulo", mais bon, les informaticiens l'ont improprement nommé comme ça).</p><p>Donc l'image est constituée de xblock blocks de bloclen_w pixels, plus d'un bloc avec le reste, cad de width%blocklen_w</p><p>Mais il y a quand même plus simple :<br>Si le dernier bloc "entier", va de (xblock-1)*blocklen_w à (xblock)*blocklen_w<br>le dernier bloc (reste) va de xblock*blocklen_w à ... la fin, cad width</p><p>(ce qui se retrouve bien avec les modules :<br>xblock*blocklen_w + width%bloclen_w = (width/blocklen_w)*blocklen_w + width%blocklen_w = (par définition du %) width</p><p>Bref, la taille du dernier block peut se calculer avec un %, si on y tient. Mais les bornes, c'est vite vu : il va de la fin du dernier block "entier" à la fin de l'image.</p><p><span class="tid_sideNote">Rem1 : avec, comme c'est l'usage en informatique souvent : "va de A à B" signifiant "va de A inclus à B exclus"<br>Rem2 : évidemment, en faisant le même raisonnement sur height/blocklen_h/yblock</span></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_41">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Moopvu" style="background-color: rgb(204,82,186); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 22 décembre 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1719669 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1719669/1" tid_id="1719669">Moopvu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">ZZz....zZzz...</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Hm. Je vais voir tout ça du coup. Moi qui pensais à la base finir le tour en quelques heures...<br>Je vous tiens au courant. <img src="../../../../gfx/square/anim.png/sifflote.gif" alt=":-&quot;" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>