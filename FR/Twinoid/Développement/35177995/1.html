<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Programme Python</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title">Programme Python</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour, j'ai conscience que le topic que je vais ouvrir n'a aucun rapport avec Twinoïd. Mais j'ai cru en voir quelques uns du même goût.<br>Bref, j'aurais besoin si possible de l'expertise en programmation de quelques uns d'entre vous.<br><em></em><br>Voilà, j'aimerai coder un programme en Python qui soit capable de me reconnaître une note de musique.(<a target="_blank" href="http://theremin.music.uiowa.edu/index.html">prise sur ce site, je pense</a>)<br>Je ne pars pas sur quelque chose de très compliqué (du moins je pense, je n'ai quasiment aucune notion de programmation). En gros, le but c'est de prendre do, ré, mi, fa, sol, la, si, d'en "montrer" un des sept au programme et de voir si il arrive à trouver lequel c'est.<br><em></em><br>Pour faire ça je pensais partir sur une analyse de Fourier du signal que j'ai envoyé (la note que je donne au programme) et détecter la valeur d'un pic (un maximum donc). Puis faire de même avec toutes les notes que le programme connaît, comparer les résultats et afficher le nom de la note pour laquelle c'est égal (en théorie ce sera exactement égal puisque ce seront toujours les mêmes notes mais au pire on pourra toujours faire intervenir un petit epsilon de correction).<br><em></em><br>Moi j'ai une approche assez théorique de la chose donc ça me semble réalisable et pas très compliqué. Vous qui avez une approche sûrement plus pratique, saurez vous me dire si ce que je demande est faisable pour quelqu'un ayant un niveau très modeste en programmation ? Evidemment je chercherai de l'aide à droite à gauche sur Internet et dans mon entourage. Et si vous voulez me donner des conseils, des astuces ou simplement que vous avez une idée de la tête que devrait avoir le programme, n'hésitez pas non plus.<br><em></em><br>Merci d'avance.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>D'abord sur le plan "théorique" (et un peu pratique, mais je veux dire, sans parler programmation encore) :</p><ul><li>Une fois que tu as le pic dans la transformée de fourier, inutile d'aller faire des comparaisons pour avoir la note. Normalement, tu fais un log à base 2 de la fréquence trouvée divisée par 523,251. La partie entière est le numéro de l'octave (positive pour les octaves aiguës, négative pour les graves, 0 pour l'intermédiaire). Ce qui est après la virgule est la note dans l'octave : 0 pour Do, 1/12 pour do#/re♭, 2/12 pour re, 3/12 pour mi♭/re#, ..., 10/12 pour si♭, 11/12 pour si (et 12/12, cad 1, cad 0 mais avec une octave de plus pour pour le do à nouveau)</li></ul><p>En python</p><pre>["do","do#","re","re#","mi","fa","fa#","sol","sol#","la","la#","si"][round(log2(f/523.251)*12)%12]</pre><p>te donne la note en fonction de la fréquence (et comme tu peux le constater le plus dur c'est de traduire le nombre en nom humain de la note)</p><ul><li>En revanche tu risques d'être un peu déçu par la transformée de fourier. Le bruit, les harmoniques, etc. Cela dit, je suis curieux de savoir ce que ça donnera sur des données enregistrées proprement de ta base de donnée. J'ai jamais essaya avec rien d'autre que des sinus construits (auquel cas, ça marche pas mal^^), et des bruits enregistrés avec du matériel de très mauvaise qualité <span class="tid_sideNote">j'avais "inventé" un radar pour détecter la vitesse des voitures avec mon 6128 quand j'étais gamin. Comme le 6128 n'avait pas de micro il fallait bricoler à partir de l'entrée pour les cassettes, qui servait à lire des programmes enregistrés sur cassette et pas du vrai son. Et là dessus avec l'effet Dopler, et en supposant que la voiture n'était pas en train d'accélérer, de ralentir, ou pire de passer une vitesse, j'en déduisais la vitesse. Les résultats n'étaient pas à la hauteur de ce que j'espérais. Disons que si un conducteur s'était pris un PV sur la base de ce radar, il aurait facilement pu le faire annuler devant un tribunal je crois^^</span></li></ul><br><br><p>Sur un plan "programmation" maintenant :</p><p>Pour la FFT, regarde du côté de numpy, il y a déjà une lib de transformée de fourier.</p><p>Pour la lecture des données, dans un premier temps, je te conseille de transformer tes données en .wav, et de lire le contenu du .wav</p><p>Si tu en fais un .wav 16 bits signés 48000 hz mono, tu n'as plus qu'à lire les entiers sur 16 bits dans le fichiers wav (en sautant les 44 premiers octets qui sont l'entête), et faire ta FFT à partir de ce tableau d'entiers.<br>(En sachant que une période de "1" dans ce tableau correspond donc à une période de 1/48000 dans la vraie vie. Il faut donc multiplier les fréquences par 48000 avant de faire le calcul précédent avec le log.</p><br><p>En tous cas d'un point de vue code, c'est très faisable si ton but est d'utiliser des bibliothèques existantes.</p><p>Et ça l'est d'ailleurs aussi si tu veux coder toi même la transformée de Fourier.</p><p>D'un point de vue résultat, tu ne recréeras probablement pas Shazam en deux lignes de python <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_c_c_f0dfe203_430289_100x100.png" title="Nadawoo" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_430289 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/430289/1" tid_id="430289">Nadawoo</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">Pingouin pour</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je n'y connais rien en transformation de Fourier, peut-être qu'elle contient la solution à la remarque que je vais faire. Le souci que je vois c'est qu'il existe bien plus que sept notes. Sur un piano tu n'as pas que sept touches, il y a plusieurs do, plusieurs ré, etc. Le découpage en sept notes de do à si est une simple convention. Partant de là, comment peut-on dire que telle fréquence est un mi ? Reconnaître un enchaînement de notes comme le fait Shazam, je vois le principe, mais mettre un nom sur une note isolée, comment c'est possible ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_e_0_73ed7b76_20333.jpg" title="Selliato" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_20333 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/20333/1" tid_id="20333">Selliato</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\fame.png" title=""/> Chef dÃ©corateur du Grand HÃ´tel</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>Partant de là, comment peut-on dire que telle fréquence est un mi ?</cite></p><p><span class="tid_strike">Deux mi différents auront X gammes de différences mais resteront toujours des mi même isolés.<br><br>à chaque fois qu'on monte de gamme, on multiplie par 2 la hauteur de la fréquence du mi ( et vice-versa ), il y à donc une logique physique et mathématique qui fait que chaque fréquence est associée à une note ( ou se rapproche d'une note ). Et une logique à l'oreille aussi vu qu'une chanson jouée sur une gamme différente sera facilement reconnaissable ( même si parfois ça peut donner un résultat moins satisfaisant ).<br><br>Du coup si tu demande à plusieurs personnes de te faire un mi, il y a de grande chance pour que tout le monde fasse un mi différents mais si tu leur demande de faire la note ayant une fréquence de 523,25Hz , une grande partie ne comprendra pas ce que tu veut mais ceux qui auront compris te feront tous un mi identique.<br><br>Les Bémol, Dièse ... étant la pour désigner des fréquences intermédiaires.<br><br><br>Le système est arbitraire certes, mais basé sur une réalité.</span></p><p>En fait après vérification il se peut que j'ai dit une grosse bêtise et que j'ai déformé ce que j'avais compris par le passé.<br>Si quelqu'un avec de vrais connaissances en musique et pas juste quelques cours peut confirmer/infirmer ce serait plus sûr xP.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_3_6_5f5566f2_148_100x100.png" title="Bugzilla" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_148 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/148/1" tid_id="148">Bugzilla</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\Dark.png" title=""/> DivinitÃ© diabolique</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_preCite"><span class="tid_user tid_user_430289 tid_userBg tid_userFriend tid_parsed" tid_bg="1" tid_id="430289">Nadawoo</span></span><cite> (...) Partant de là, comment peut-on dire que telle fréquence est un mi ? Reconnaître un enchaînement de notes comme le fait Shazam, je vois le principe, mais mettre un nom sur une note isolée, comment c'est possible ?</cite> Quand on connaît la fréquence dominante, on peut trouver la note correspondante avec son octave. Voir <a target="_blank" href="http://fr.wikipedia.org/wiki/Note_de_musique">ici</a> et <a target="_blank" href="http://fr.wikipedia.org/wiki/Fr%C3%A9quences_des_touches_du_piano">ici</a> pour des tableaux donnant la correspondance entre les notes et les différentes fréquences.</p><p>Et pour répondre à la question d'origine :<br><span class="tid_preCite"><span class="tid_user tid_user_655 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="655">Adrienzo</span></span><cite>Voilà, j'aimerai coder un programme en Python qui soit capable de me reconnaître une note de musique.</cite> Il y a plusieurs techniques possibles pour reconnaître des notes de musique. <a target="_blank" href="http://en.wikipedia.org/wiki/Pitch_detection_algorithm">Cette page</a> (Wikipedia en anglais) donne quelques exemples et contient des liens vers des articles plus complets dans sa liste de références. Les techniques basées sur des FFT ne sont pas les seules possibles.</p><p>J'ai aussi trouvé d'autres pages intéressantes (toutes en anglais) :</p><ul><li><a target="_blank" href="http://stackoverflow.com/questions/1457228/pitch-recognition-of-musical-notes-on-a-smart-phone">Cette question</a> sur StackOverflow dont les deux premières réponses sont très intéressantes : la première explique les bases et contient des liens donnant encore plus d'infos. La seconde réponse explique que que si on veut faire une analyse en temps réel, il vaut mieux utiliser une analyse dans le domaine temporel (passages par zéro) que dans le domaine spectral comme c'est le cas avec les FFT.</li><li><a target="_blank" href="http://echoprint.me/">Echoprint</a> est un service et un logiciel libre (code disponible sur GitHub) permettant d'identifier des morceaux de musique. Ils ont une liste impressionnante de morceaux de musique connus.</li><li><a target="_blank" href="http://gist.github.com/255291">Un programme en Python</a> (code sur GitHub, cité dans la question sur StackOverflow) qui compare les différentes techniques d'identification des notes. Il me semble que cela répond de manière plus que complète à la question posée ici. <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></li></ul>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_user tid_user_20333 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="20333">Selliato</span> Les notes ont toutes une fréquence très strictement définie. Et c'était d'ailleurs déjà le cas avant même qu'on sache qu'elles correspondaient à des fréquence. Même du temps ou un mi était un mi, les notes avaient déjà une valeur absolue et pas une valeur relative. Puisque c'est en gros ce que tu dis, si je comprends bien : tu pars du postulat que la valeur d'une note est relative aux notes d'à côté. Qu'un mi est juste la note 1 ton au dessus du ré. Ce n'est pas le cas. Seuls les gens qui ont une "oreille absolue", pouvaient le savoir, et pour le commun des mortels le mi n'est que la note 1 ton au dessus du ré. Mais ce n'est pas parce qu'on trompe beaucoup de gens en décalant tout d'un ton que ça veut dire que tout ça n'a qu'une valeur relative. Ça veut juste dire que pour la plupart des gens, la valeur absolue n'est pas très importante.</p><p>(Mais sinon, c'est quand même pas pour rien qu'on a des gammes en "do majeur" ou "fa majeur", qui obligent à coller parfois des bémols systématiquement sur une note donnée. On pourrait dire : mais pourquoi ne pas simplement traduire, puisque c'est forcément faisable, tout ça en do majeur, pour simplifier la vie des gens. Réponse : parce qu'il reste quand même une différence)</p><p><span class="tid_user tid_user_430289 tid_userBg tid_userFriend tid_parsed" tid_bg="1" tid_id="430289">Nadawoo</span></p><p>La raison pour laquelle ça tombe si bien sur les fréquences alors que ça a été conçu avant qu'on sache qu'il y a des fréquences est très naturelle : nos oreilles aussi font des transformées de fourier.</p><p>Et sont impactées par les harmoniques : mis à part la sinusoïde pure une note est constituée d'une sinusoïde de fréquence f, et de tas de sinusoïde de fréquences multiples de f (c'est de la physique, pas une convention : un truc qui vibre à une fréquence f vibre en général aussi à une fréquence 2f). Les 2 fréquences principales seront en général f et 2f. Ce qui fait que 2f est associé à la même note. Jouer deux do de deux octaves différentes ne donne pas l'impression qu'on a combiné 2 notes, mais plus qu'on a changé d'instrument. C'est cette raison qui explique que, même les autres cultures musicales développées indépendamment de la notre, ont cette notion "d'octave", et que partout, une octave, c'est un facteur 2 sur la fréquence.<br>"la" c'est 440 Hz. et donc c'est aussi 220Hz ou 880 Hz.<br>(je cite le "la", parce que c'est à partir du "la 440Hz" que la fréquence des autres est établie ; c'est pour ça que lui n'a pas de virgules^^)</p><p>Et ensuite, l'oreille de nos ancètres a fait le reste : sans savoir ce que c'était, ils ont naturellement découpé l'octave en intervalles égaux (les 1/2 tons). Qui s'avère être un découpage uniforme, mais dans l'espace logarithmique (en gros c'est le logarithme de la fréquence qui est uniformément découpé en petits intervalles. Là aussi c'est pas une convention spécifique ; c'est parce que l'oreille humaine est sensible au logarithme des fréquences)</p><br><p>Mon petit bout de code fait un log à base 2. Pourquoi à base 2 (la répartition aurait été uniforme avec n'importe quel log) : parce que justement, un changement d'octave se fait par un facteur 2.<br>Le LA c'est 110Hz, 220Hz, 440Hz, 880Hz, etc</p><p>Le log à base 2 de ça c'est 6.78135971352466, 7.78135971352466, 8.78135971352466 et 9.78135971352466 respectivement. Normal : multiplier par 2, c'est ajouter 1 au log à base 2, par définition même du log.</p><p>On voit tout de suite l'astuce : ce qui caractérise le fait que c'est un "la" c'est les chiffres après la virgule. La partie entière elle donne l'octave du "la".</p><p>D'où le %12 de mon code, après multiplication par 12<br>Si on multiplie les chiffres précédents par 12 en ne gardant que la partie entière, ça donne 81, 93, 105, 117<br>On voit bien que la partie "multiple de 12" correspond à la valeur entière, le "module 12" correspond à une approximation des virgules.<br>81 c'est 6*12+9<br>93 c'est 7*12+9<br>105 c'est 8*12+9<br>117 c'est 9*12+9</p><p>On reconnait la partie entière (6,7,8,9) et le 9 qui reste est une approximation du 0,781359 ; 0,781359 c'est 9/12.<br>Donc le x*12 caractérise l'octave. Le 9 caractérise la note dans l'octave</p><p>le "%12" oublie donc la partie x*12 pour ne garder que la note dans l'octave (une explication longue pour qqc de bêtement arithmétique : j'ai multiplié par 12, donc c'est ce qui dépasse du multiple de 12, qui est la "virgule"<img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p><p>Pourquoi 12 : parce que l'octave est décomposée en 12 1/2 tons (le fait que ce soit en intervalles logarithmiques est commun à tout l'humanité. Le fait que ce soit 12 est spécifique à la musique occidentale)<br>Je fais un "round" parce que la vie n'est pas parfaite ; et que ça ne tombera donc pas forcément pile poil sur une virgule multiple de 1/12. Le round me rapproche de la plus proche.</p><p>Je divise par une fréquence pour avoir une référence (ça ne fait qu'un décalage dans le log), parce que sinon ça ne tombe pas pile :<br>6.78135971352466 c'est pas 6 plus 9/12, mais 6 plus 9,376.../12</p><p>En divisant par une fréquence d'une note connue, ça me recale sur des nombres "pile" en 12e<br>110/523.251 c'est 0.21022415628446006<br>220/523.251 c'est 0.4204483125689201<br>440/523.251 c'est 0.8408966251378402<br>880/523.251 c'est 1,6817932502756805</p><p>Les logs à base 2 de ça sont -2,25, -1,25, -0,25 et 0,75 respectivement<br>Ça n'a fait que tout décaler ; normal, le log est fait pour ça. Ça a tout décalé de log2(523.251). Mais maintenant j'ai une virgule qui tombe "rond", qui correspond à des 1/12e exacts (c'est logique : je me suis calé sur une note occidentale connue, comme toutes les notes occidentales sont séparées par des mutiples exacts de 1/12 en log2, ...)</p><p>J'ai choisi la fréquence d'un do et non celle du la (qui est la seule note dont la fréquence est ronde, les autres étant déduites de celle du la), parce que ça permettrait, si il le voulait de donner simplement la paire "numéro d'octave, note".</p><p>Le code aurait marché avec comme base 440 aussi, en partant du "la"</p><pre>["la","la#","si","do","do#","re","re#","mi","fa","fa#","sol","sol#"][round(log2(f/440)*12)%12]</pre><p>Ce qui est plus logique physiquement (c'est le "la" la référence)<br>Mais après si on veut le numéro de l'octave c'est pas juste la partie entière du log (c'est la partie entière +1 si on est entre "do et sol#" et la partie entière si on est entre "la et si"<strong></strong>)</p><br><p>(J'anticipe le pinaillage de corvus s'il passe par là : oui, il y a des commas ; oui le "do#" n'est pas exactement un "re♭". Mais bon, on parle en pratique là. Sur un piano c'est la même touche)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_6">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_e_0_73ed7b76_20333.jpg" title="Selliato" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_20333 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/20333/1" tid_id="20333">Selliato</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\fame.png" title=""/> Chef dÃ©corateur du Grand HÃ´tel</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_user tid_user_36044 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="36044">ayalti</span> :<br>Donc effectivement, j'avais la bonne logique mais en fait je me suis complètement gouré dans mon vocabulaire, du coup mon message peut faire complètement à coté de la plaque xP</p><p>Et effectivement l'oreille absolue est une bonne illustration, sans un constante fréquence/note ce "don" n'aurait aucun sens.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_7">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je n'ai lu qu'en diagonale pour le moment, faute de temps, et c'est pour ça que je ne réagis pas. Mais je vous remercie d'avance de vos réponse. Dans ce que j'ai survolé il y a déjà vraiment des choses très intéressantes (en particulier chez Ayalti pour les explications claires, et il me semble que certains liens chez Bugzilla pourraient m'aider plutôt pas mal aussi).</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_8">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_c_c_f0dfe203_430289_100x100.png" title="Nadawoo" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 janvier 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_430289 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/430289/1" tid_id="430289">Nadawoo</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">Pingouin pour</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Les questions de sinus et de logarithme m'échappent un peu à cause de mon faible niveau en maths, mais j'ai compris la logique générale. Merci. <img src="../../../../gfx/square/smile.png" alt=":)" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_9">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 9 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Rebonjour messieurs dames. <br><em></em><br>Cela faisait un moment que je m'étais pas remis là dessus et donc j'ai finalement opté pour Scilab, rendant mon titre de sujet inapproprié mais passons.<br><em></em><br>J'ai un petit problème avec Scilab. <br>Voilà comment je commence mon délire : <br><em></em><br>son = loadwave("xxxxxx.wav" )<br>Son = intdec(son,1/2) <em>ramène la fréquence d’échantillonnage à 44100 car par défaut elle est à 22050</em><br>X=fft(Son)<br>y=abs(X)<br>[m,i]=max(y)<br><em></em><br>et ensuite j'utiliserai le i pour trouver la note à l'aide de l'idée d'Ayalti.<br>mon problème c'est que j'ai essayé deux fois avec deux la 440 "différents" tirés d'Internet, lorsque j'utilise la commande "analyze" qui donne un diagramme fréquentiel du signal j'ai dans les deux cas un pic parfait à 440 mais dans les deux cas j'ai un max différent 2200 et des poussières dans le premier cas et 4401 dans le second cas. A savoir respectivement 5 et 10 fois ce que j'aimerai trouver.<br>Est-ce que quelqu'un aurait une quelconque idée d'où vient ce problème ? Est-ce parce que la fft n'est pas suffisament précise ? Ou est-ce que j'ai fait quelque chose de travers ? Comment faire mieux ? :/</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_10">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 9 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>PS : Dans le second cas le la que j'ai pris était 2 fois plus long (10 secondes !) que dans le premier (5 secondes !). Vous pensez qu'en prenant un la de une seconde je tomberai sur le bon résultat ? <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"><br><em></em><br>Est-ce que la longueur de l'échantillon est censée avoir une influence quelconque sur la fft ? (ou du moins sur son maximum)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_11">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 9 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Double (par concaténation) ton échantillon, et tu auras ta réponse <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p><p>Mais à vue de nez, je dirais que ce que tu vois sont les harmoniques.<br>Je suppose que les "la" que tu as chopé n'étaient pas des sons parfaitement sinusoïdaux.</p><p>A moins qu'il s'agisse d'un simple cafouillage sur l'utilisation de la lib fft de scilab.<br>Comment déduis-tu le pic de fréquence ?</p><p>La lib fft de scilab est "adimensionnée".</p><p>Donc, en gros, le pic à 440 devrait correspondre à (440*N/44100) N étant le nombre d'échantillons dans ton son initial (cad 44100*d, d étant la durée en secondes)</p><p>D'ailleurs, en écrivant ma parenthèse, je me rends compte que ça signifie donc que le pic est à l'indice 440*44100*d/44100 = 440*d.<br>Je me permets donc de supposer que tu as tout simplement supposé que le résultat de la fonction fft était indicé en Hz, et que la chance fait que c'est pas tombé si mal.<br>Le résultat de fft ne peut pas être indicé en Hz (comment pourrait-elle deviner quelle est la fréquence d'échantillonage ? Comment même une lib mathématique pourrait elle connaître l'existence des Hz, qui sont de la physique : ça implique la définition d'une unité, signifiant "1 fois par seconde", et donc la définition de l'unité "seconde"<strong></strong>). Il est indicé en fréquence qui correspond à "0 fois par extrait", "1 fois par extrait", "2 fois par extrait", ... "N/2 fois par extrait" (N étant le nombre d'échantillon dans l'extrait). Ca s'arrête à N/2 du fait du théorème de Shannon (qui dit que ça ne sert à rien d'avoir plus d'info, en gros - c'est d'ailleurs ce même théorème qui a conduit au choix du 44100 Hz des CD : l'oreille humaine n'étant pas sensible à ce qu'il y a au dessus de 22050 Hz, il est inutile d'avoir des infos sur les fréquences supérieures, mais il faut tout ce qui concerne 22050 ou moins. Et pour avoir des infos sur 22050 Hz, il faut donc 44100 échantillon par secondes)<br>C'est adimensionné, puisqu'on ne s'inquiète pas de savoir quelle est la durée de l'extrait, donc la durée d'un échantillon, les fréquences, etc. C'est à toi de déduire ce que ça veut dire en termes dimensionnés selon que ton extrait correspond à 10 secondes ou à 1 picoseconde.</p><br><p>(Note : le tableau résultat contient N info et pas N/2 ; parce qu'il y a l'info de déphasage qui est contenue implicitement dans le tableau : ce qui dépasse N/2 n'apporte aucune info par rapport au N/2 premier élément en termes de fréquences, mais permet de connaitre les déphasages relatifs des fréquences entre elles</p><p>Au final ça fait que N échantillons se retrouvent encodés dans ... N informations fréquentielles. Rien de très surprenant du point de vue de la théorie de l'information. Plus l'extrait grandit, plus on a accès à des basses fréquences)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_12">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 9 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>J'ai utilisé ça <a target="_blank" href="http://lumin.us/msr/forums/440hz.wav">(à mettre à fond pour s'éclater en soirée)</a>. Sur Audacity ça me donne une sinusoïde carrément belle <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"><br><em></em><br>Sinon bah comme dit sur la page d'avant, j'ai donné le son à Scilab, j'en ai fait la fft, j'ai pris le module pour avoir des valeurs réelles et j'ai cherché le max du module de la fft donc. L’abscisse de ce max c'est censé être la position du pic de fréquence.<br><em></em><br><cite>D'ailleurs, en écrivant ma parenthèse, je me rends compte que ça signifie donc que le pic est à l'indice 440*44100*d/44100 = 440*d.</cite><br>Du coup ce n'est pas absurde qu'il me trouve 2200 et 4400 pour 5 et 10 secondes respectivement. Si ?<br>Donc pour régler le problème il suffirait que je décide de travailler avec des échantillons faisant tous la même durée (disons n secondes) et que je divise ensuite le maximum obtenu par n ?<br><em></em><br>Enfin dans la suite tu sembles dire qu'en fait ce que je trouve en regardant l'abcisse du maximum ce n'est pas la fréquence harmonique de la note que je cherche et que j'ai simplement eu un coup de bol ? En fait ce que je trouve c'est une fréquence qui n'est pas exprimée en Hz c'est ça ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_13">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 9 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Si ce que tu as donné est bien directement l'indice "i" que tu as obtenu, alors, oui, ce que tu trouves est une fréquence exprimée en "nombre de fois par extrait" et pas en Hz.</p><p>Il faut donc diviser par la durée (en secondes) de l'extrait pour avoir des Hz.<br>Ce qui donne 440 tout pile dans les deux cas.</p><p>Encore une fois, la notion de "Hz" est inaccessible à une lib à qui tu n'as jamais précisé quelle était ta fréquence d'échantillonnage (c'est seulement dans ta tête qu'est l'info "44100 échantillons par seconde" ; du moment que la fonction fft ne la connait pas, elle ne sait même pas de quoi elle parle ; si elle manipule 1 nanoseconde de mesures de niveau d'énergie d'un atome radioactif échantilloné à 1 picoseconde, ou si elle manipule 1 milliards d'années de mesures de température du manteau terrestre, échantilloné à 1 million d'année)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_14">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 9 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oui c'est le "i" que je vous ai donné ^^<br>Donc il faudra que je divise ça par la durée de mon extrait pour retomber sur ce que je veux dans la bonne unité.<br>Merci beaucoup Ayalti <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_15">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Au passage le programme marche assez bien si ça intéresse quelqu'un.<br><em></em><br><cite>function func(a)<br>cd<br>son=loadwave(a)<br>X=fft(son)<br>y=abs(X)<br>[m,i]=max(y)<br>I=i/2<br>j=log2(I/523.251)<br>k=round(j*12)<br>f=floor(k/12)<br>n=pmodulo(k,12)<br>if n==0 then <br> disp(4+f, "do" )<br>elseif n==1 then<br> disp(4+f, "do#" ) <br>elseif n==2 then<br> disp(4+f, "ré" ) <br>elseif n==3 then<br> disp(4+f, "ré#" )<br>elseif n==4 then<br> disp(4+f, "mi" )<br>elseif n==5 then<br> disp(4+f, "fa" )<br>elseif n==6 then<br> disp(4+f, "fa#" )<br>elseif n==7 then<br> disp(4+f, "sol" ) <br>elseif n==8 then<br> disp(4+f, "sol#" )<br>elseif n==9 then<br> disp(4+f, "la" )<br>elseif n==10 then<br> disp(4+f, "la#" )<br>elseif n==11 then<br> disp(4+f, "si" ) <br>end<br>endfunction<br></cite><br>Cela ne fonctionne que pour un son de 2 secondes, si vous voulez une autre durée il suffit de changer la valeur de I en I=i/durée<br><em></em><br>Je suppose qu'il y avait moyen de faire plus esthétique sur la fin mais c'est le résultat qui compte <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"><br><em></em><br>Et également j'ai fini par me rendre compte qu'en suivant aveuglément Ayalti je me suis compliqué la tâche, j=log2(I/32.70) aurait sûrement simplifié les choses. 32.70 c'est la fréquence du Do de l'octave 0. Du coup j'aurais pas eu à rajouter 4 à mes f à chaque fois. <img src="../../../../gfx/square/razz.png" alt=":P" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_16">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_c_e_0b4f87d3_8297_100x100.png" title="kill0u" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8297 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8297/1" tid_id="8297">kill0u</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\defender_4.png" title=""/> Psychopathe du classement</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Si le langage le permet (initialisation de tableaux de ce genre), ça serait peut-être plus clair de mettre ça</p><pre>notes = ["do", "do#", "ré", "ré#", "mi", "fa", "fa#", "sol", "sol#", "la", "la#", "si"]
disp(4+f, notes[n])
</pre><p>à la place de tous tes if/elseif, non ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_17">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>Et également j'ai fini par me rendre compte qu'en suivant aveuglément Ayalti je me suis compliqué la tâche, j=log2(I/32.70) aurait sûrement simplifié les choses. 32.70 c'est la fréquence du Do de l'octave 0. Du coup j'aurais pas eu à rajouter 4 à mes f à chaque fois. <img src="../../../../gfx/square/razz.png" alt=":P" class="tid_ico"><br></cite>Je m'étais basé sur l'octave dite "normale". Qui n'est pas la 0, en effet.<br>Mais bon, ce 0 n'est qu'une convention (l'oreille humaine est capable d'entendre ce qu'il y a à l'octave avant d'ailleurs).</p><p>Ce qui serait intéressant maintenant (enfin, moi je trouverais ça intéressant) c'est de voir ce que ça donne sur des enregistrements plus compliqués.<br>Par exemple des notes de synthétiseurs (donc "pures" mais pas sinusoïdales)<br>Puis sur des notes de vrais instruments de musique (seules et avec peu de bruit)<br>Voire sur un enregistrement de qqn en train de freudonner</p><p>Et après carrément essayer sur des paires de notes (par exemple, un cas simple et déjà puissant : identifier les touches d'un téléphone)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_18">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 26 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_user tid_user_8297 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="8297">kill0u</span> : Ouais c'est ce genre de truc "plus esthétique" que je voulais essayer. J'avais d'ailleurs tenté de faire quelque chose qui ressemble à peu près à ce que tu viens de me donner mais cela n'avait pas marché. Je ne connais pas assez le langage je pense et le if/elseif comme c'est basique de chez basique cela me convenait parfaitement <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"> Si je trouve comment faire (car c'est fort probablement faisable) je changerai par contre ^^<br><em></em><br><span class="tid_user tid_user_36044 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="36044">ayalti</span> :<br>Oui j'avais compris pourquoi tu avais divisé par cette note là spécifiquement, moi je me suis basé sur le tableau qui est sur <a target="_blank" href="http://fr.wikipedia.org/wiki/Note_de_musique">Wikipédia</a> afin de reconnaître la note donc au final diviser par 32.70 ça m'arrange plutôt bien, même si du point de vue physique c'est pas le choix qui semble être le plus évident. <img src="../../../../gfx/square/razz.png" alt=":P" class="tid_ico"></p><p>Sur des notes d'instruments (guitare) cela fonctionne, j'ai demandé à un pote de me faire la pentatonique majeure (do, ré, mi, sol, la, do) et le programme reconnait parfaitement les bonnes notes quand il faut, ce qui est quand même déjà assez cool !<br>Je vais voir si j'arrive à pousser le truc plus loin. Le coup des touches de téléphone me paraît même bien sympa (même si à l'ère du tactile elles ne font plus énormément de bruit <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico">) j'y réfléchirai sûrement un petit peu.</p><p>Je ne comprends pas comment on pourrait reconnaître des notes fredonnées par quelqu'un par contre, c'est vraiment possible <img src="../../../../gfx/square/eek.png" alt="8O" class="tid_ico"> ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_19">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Pour les touches du téléphone, mon tout dernier téléphone - reçu hier, et pour la première fois de ma vie, j'ai arrêté de jouer à "pas besoin de prendre des grandes marques, ya des trucs très bien à 100€", et j'ai pris l'Android le plus cher du marché, récemment sorti en grande pompe - bref, comme c'est récent, je crane un peu ; mais en tous cas c'est un téléphone récent - mon tout dernier téléphone donc fait encore des bips quand on appuie sur les touches (ie quand on compose un numéro au lieu de choisir un contact)</p><p>Je ne suis pas tellement au fait point de vue téléphonie moderne ; mais j'ai vu tellement d'anachronisme (l'histoire du cul du cheval romain) dans ce domaine quand je m'y intéressais, que je ne serais vraiment, vraiment pas surpris du tout d'apprendre que les notes vocales sont toujours transmises quelque part dans le protocole ; ne serait-ce que parce que quand on appelle un fixe, c'est probablement encore comme ça que fonctionne la téléphonie fixe (un canal audio est ouvert, et sur ce canal sont transmis, en "vocal", les chiffres).</p><p>En tous cas, il y a au moins un cas où c'est sûr à 100% que ça marche encore comme ça : les serveurs vocaux ("Pour acheter un billet, appuyez sur 1, pour blabla, appuyez sur 2, pour revenir au menu, appuyez sur *, etc"<strong></strong>).<br>Ces serveurs ne font que communiquer de façon vocale (c'est évident : ils parlent dans l'écouteur, et écoutent ce qu'on dit) ; l'appui sur les touches n'est qu'une façon nette d'émettre un son précis et "déterministe".</p><p>J'avais creusé un peu cette histoire quand j'étais gamin (cad à l'époque où il n'y avait pas internet, et où donc il fallait reverse-engineerer les trucs^^ aujourd'hui je suppose qu'il suffit de regarder sur wiki pour avoir la réponse définitive), et j'avais conclu que une touche de téléphone était la combinaison de deux sinusoïdes.</p><p>Raison pour laquelle je l'évoque comme cas le plus simple de son complexe^^<br>Tu as deux fréquences à reconnaître au lieu d'une. Mais ce sont des sinusoïdes pures. Et en plus c'est codifié, donc il n'y a probablement que 4 fréquence possible pour chacun des deux signaux (vu que 4*4=16 et qu'il n'y a que 12 touches).<br>Vu que tout ça date d'une époque analogique, je ne serais pas du tout surpris que ce soit très simple : un clavier de 4 lignes de 3 touches =&gt; 1 fréquence qui désigne la ligne, une autre qui désigne la colonne.</p><br><p>Bref, si, ça sert encore. <br>(Tu pourrais par exemple probablement bricoler pour Android un serveur vocal maison, qui espionne une conversation téléphonique, et extrait les touches appuyées par ton correspondant^^)</p><p><cite>Je ne comprends pas comment on pourrait reconnaître des notes fredonnées par quelqu'un par contre, c'est vraiment possible </cite>Je suppose que Shazam le fait.</p><p>Oui, c'est possible. C'est pas très différent de la guitare. Je m'attendais à ce que ça ne marche pas nickel avec la guitare (qu'il faille déjà un traitement pour le bruit, les harmoniques, etc) ; mais puisque tu dis que ça marche nickel pour la guitare, il y a même des chances que tu arrives à qqc avec la voix.<br>La voix n'est jamais qu'un instrument très complexe. Mais quand tu chantes, il y a bien une fréquence, et un grand paquet d'harmoniques.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_20">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Haha c'est sûrement parce que le mien est constamment en silencieux, si ça se trouve il le fait aussi.<br>En gros ce que tu dis c'est que pour appeler quelqu'un ce n'est pas le numéro à proprement parler qui est reconnu mais la musique des chiffres ? C'est classe.<br>Pas mal l'idée des lignes et des colonnes, j'avoue que ça me plait assez bien.</p><p>Donc si je fais l'analyse fréquentielle d'un son de pavé numérique j'obtiens deux pics, c'est ça ?<br>En fait ça me fait un peu penser aux accords en musique, qui sont en fait des notes jouées simultanément. Du coup pour reconnaître un accord de disons 3 notes il faudrait que j'arrive à déterminer les 3 maxima, trouver quelles notes correspondent à chacun d'entre eux et ensuite voir quel accord correspond à la combinaison des trois ? En gros essayer de découper l'accord, non ?</p><p>Hum pour ce qui est de Shazam il me semble que si je lui fredonne une chanson il ne sera pas capable de la reconnaître. Je viens d'ailleurs de vérifier et c'est clairement écrit que : "Shazam only works with pre-recorded music", d'ailleurs ils ne peuvent pas reconnaître une chanson chantée en live non plus (à moins que celui ci n'ait été enregistré et soit donc intégré dans leur base de donnée).</p><p>Pour la guitare cela a marché sur absolument toutes les notes que l'on a testé, après on a bien fait attention à enregistrer ça à peu près proprement mais on était assez loin des sons "parfaits" trouvés sur Internet. Mais quand tu disais fredonner tu entendais fredonner une note ? Du genre c'est facile de fredonner un La 440 comme ça ? <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"> Je suppose que c'est ce qu'on apprend quand on apprend à chanter ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_21">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>En gros ce que tu dis c'est que pour appeler quelqu'un ce n'est pas le numéro à proprement parler qui est reconnu mais la musique des chiffres ? C'est classe.<br></cite>En tous cas c'était le cas avec le réseau analogique, et je ne serais vraiment pas surpris que ça soit resté comme héritage du passé, qu'on doit se traîner pour être compatible avec les anciens réseaux.</p><p>En gros, autrefois, quand tu décrochais ton téléphone tu étais mis directement en communication "audio" avec une gentille demoiselle, qui disait "bonjour", et à qui tu demandais le 22 à Asnières. Et qui te connectais avec ledit 22.</p><p>Un jour on a viré la demoiselle, et on l'a remplacée par une machine electromécanique, qui comptait les "clic" et faisait tourner des roues en conséquences pour te connecter avec ton correspondant. Cette machine faisait exactement la même chose que la demoiselle d'avant (et pour cause : elles ont cohabité, donc ça devait rester similaire : les mêmes appareils du même réseau devaient pouvoir servir pour passer par une demoiselle comme par une machine). Sauf que comme elle ne parle pas français, on lui parlait en "clics". "clic.......clic,clic......clic,clic,clic" pour "123" par exemple.<br>Pour pouvoir envoyer des clics facilement, les téléphones étaient munis d'un cadran ; quand on le tournait, un ressort le faisait revenir en place, avec un clic de temps en temps ; si on le tournait beaucoup, ça faisait 10 clics, si on le tournait un tout petit peu, ça faisait 1 clic ; reste plus qu'à numéroter le cadran...</p><p>Et puis un jour on a viré aussi la machine electromécanique, pour la remplacer par une machine purement électronique (analogique quand même). A qui il était plus efficace de parler en "fréquences" (mais qui reconnaissait quand même les clics, compatibilité oblige ; ça fait longtemps, mais la dernière fois que j'ai essayé, les clics marchaient encore - ya peut-être 10 ans)</p><p>Mais à part ces évolutions, tout ça fonctionnait exactement selon le même principe que la gentille demoiselle. Au lieu de "bonjour" la machine dit "biiiiiiip" (soit dit en passant, le bip est à pile 440 Hz), et au lieu de "je veux le 22 à Asnières" on lui dit "bip-bip".</p><p><span class="tid_sideNote">La conséquence de ce que je dis et que le clavier du téléphone n'était que une aide, pratique, pour parler à la machine ; dans les faits, si tu voulais continuer à parler toi-même dans le micro, comme avec la demoiselle, tu pouvais très bien dire toi-même "clic,clic,clic,clic" ou "bip-bip". On trouvait d'ailleurs à vendre des "carnets d'adresse électroniques" où tu pouvais stocker tes numéros de téléphone, et qui les "chantait" quand tu le demandais ; il suffisait de placer ton "carnet d'adresse" devant le combiné du téléphone, il chantait ton numéro, et hop, ça sonnait</span></p><p>L'arrivée de la téléphonie sur IP et du GSM, qui ont des protocoles numériques, et surtout des metadonnées rend tout ça obsolète (quand tout est numérique, pas de raison de transmettre de l'audio pour un transmettre un simple numéro).<br>Mais comme il a bien fallu que les premiers abonnés à la téléphonie via une box internet, et les premiers abonnés au mobile puissent communiquer avec ceux qui utilisaient le réseau qui marchait à coup de bips, il y a forcément eu un truc pour la compatibilité. Est-ce que ce truc implique que du coup tout le monde a continué à fonctionner à coup de bips, j'en sais rien ; je suppose que non, mais je ne serais pas plus surpris que ça d'apprendre que c'est le cas.<br>Le plus probable quand même est que c'est seulement quand on discute avec le réseau analogique qu'on se met à biper (et que ce sont seulement les relais téléphoniques qui s'occupent de biper, et plus directement nos téléphones). Mais encore une fois, ça ne me surprendrait pas d'apprendre que, pour des raisons historiques, les bips sont toujours la norme.</p><p>En tous cas, que ce soit pour faire retro ou parce qu'il y en a besoin (il y en a de toutes façons besoin pour les serveurs vocaux), les téléphones bipent encore.</p><p><cite>Pas mal l'idée des lignes et des colonnes, j'avoue que ça me plait assez bien.</cite>Ca reste à vérifier. C'est juste une hypothèse. Mais faut imaginer que tout ça date des années 1970, quand il fallait distribuer gratos des téléphones dans chaque foyers (les téléphones étaient fournis), et qu'il fallait donc un truc robuste et pas cher. Hors de question de mettre de l'électronique numérique. J'imagine donc bien un clavier qui est une matrice de connexions : chaque touche relie deux fils en ligne et deux fils en colonne. Et ces fils alimentent un oscillateur réglé sur une fréquence fixe. Les sont sont ensuite muxés (probablement à l'arrache, en le mélangeant tous via une petite résistance)</p><p><cite>Donc si je fais l'analyse fréquentielle d'un son de pavé numérique j'obtiens deux pics, c'est ça ?<br></cite>Ce n'est aussi qu'une hypothèse. Tout ce que je sais c'est que, gamin, je n'ai jamais réussi à composer une touche en éméttant une fréquence unique devant le micro, alors qu'en en éméttant deux, j'ai appelé des gens (au pif ; vu que je n'étais jamais allé jusqu'à réussir à choisir précisément le numéro). Avec un pote on s'amusait même à crier des "bips" devant le micro, et ça marchait ^^ (fallait être deux, parce que déjà chanter une fréquence précise c'est pas facile, alors en chanter deux...)</p><p>Du coup, puisque une c'est pas assez, et deux c'est suffisant, j'en ai toujours déduit qu'il y avait exactement deux fréquences (d'où mon hypothèse que ça devait être du ligne/colonne, connaissait le goût de l'époque pour la simplicité)<br><cite>En fait ça me fait un peu penser aux accords en musique, qui sont en fait des notes jouées simultanément. Du coup pour reconnaître un accord de disons 3 notes il faudrait que j'arrive à déterminer les 3 maxima, trouver quelles notes correspondent à chacun d'entre eux et ensuite voir quel accord correspond à la combinaison des trois ? En gros essayer de découper l'accord, non ?</cite>Oui.</p><p>C'est même là tout l'intérêt de la fft (s'il ne s'agissait que d'une sinusoïde, il y a des méthodes bien plus intuitive et directes pour trouver la f'réquence. Suffit de compter le nombre de passages à 0...).</p><p>La fft n'existe que parce que Fourier (et Shanon) disent qu'au final tout est une superposition de sinusoïde, et surtout que, grosso modo, c'est bijectif (à partir d'un signal on peut trouver l'unique superposition de sinusoïde qui correspond, et vice versa).</p><p>Donc, oui, on peut mélanger des sinusoïdes, et les redémêler. Toute l'industrie moderne découle de ça ! (J'avais une prof qui disait "le XXe siècle commence avec Shannon"<strong></strong>)<br>C'est ce qui permet de choisir la station de radio que tu écoutes : en un point donné, il y a un signal électromagnétique (qui n'est donc qu'une unique courbe temporelle ; une fonction t |--&gt; f(t), ou f(f) n'est qu'un réel) ; ce signal est un incroyable mélange de tout ce qui est émis (toutes les stations de radio, la tnt, les téléphones, la police, etc...) ; mais ce mélange est défaisable. Si tu captes ce signal, et fait une fft dessus, tu retrouveras toutes les fréquences émises (et si tu regardes l'évolution au cours du temps d'une des composantes fréquentielles, il te suffira de la coller dans un fichier .wav pour entendre ce qui passe à la radio)<br><br>Bref, aucun soucis pour les accords. C'est juste que plus il y a de notes, plus il y a d'harmoniques et plus il y a de bruit, plus ce sera difficile de discerner notes, harmoniques et bruit.<cite>Hum pour ce qui est de Shazam il me semble que si je lui fredonne une chanson il ne sera pas capable de la reconnaître.</cite>Alors je confonds avec une autre appli. J'avais 2 applis sur android. Une qui faisait comme tu dis. Et l'autre qui se base plus sur la mélodie. J'ai oublié le nom de la 2e. Mais elle devait faire une fft. En tous cas, je pouvais fredonner "pom, pom, pom, pom, pom" (sur l'air de la chevauchée des Walkyries) et il me retrouvait le morceau... des fois.<br>Ca ne marchait pas génialement (et en plus on a l'air très con à fredonner devant son téléphone), mais je ne vois pas trop comment il pouvait faire, sinon en faisant des fft.<br><br><cite>Mais quand tu disais fredonner tu entendais fredonner une note ? Du genre c'est facile de fredonner un La 440 comme ça ?</cite>Il va avoir un paquet d'harmoniques, parce que la voix humaine est très complexe. Mais, oui, il devrait y avoir un pic de fréquence à 440 si tu chantes "laaaaaaaaaaaaaaaa" (sans chercher à imitier une sinusoïde).<br>Selon ton talent, tu arriveras plus ou moins bien à viser le 440. Mais bon, si c'est 441, ça ne sera pas un drame. Rien n'interdit à ton logiciel de regarder l'arrondi et de distinguer "c'est 'la' et vous chantez bien" de "ça ressemble à un 'la' mais vous chantez mal". <br><br>Tu as le soft, c'est l'occasion de savoir ^^</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_22">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><a target="_blank" href="http://fr.wikipedia.org/wiki/Code_DTMF">DTMF</a><br>J'étais vraiment tombé pile dessus avec mon reverse engineering de gamin^^</p><p>Par contre, renseignement pris, ça n'est plus utilisé pour la VoIP (ton téléphone fixe l'utilise encore, mais juste pour discuter avec la Box ADSL ; et c'est la box ADSL qui interprète ces DTML pour établir une connexion via un protocole numérique), ni pour la téléphonie mobile.<br>Mais, une fois la communication établie, les sons DTMF sont émis sur le canal audio, pour les serveurs vocaux.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_23">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_5_cabba39e_43789_100x100.png" title="Davf" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_43789 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/43789/1" tid_id="43789">Davf</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_sandb.gif" title=""/> Porteur du Souvenir</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je ne sais pas pour Shazam, mais <a target="_blank" href="http://www.midomi.com/">Midomi</a> reconnait les chansons chantées. Du moins il tente avec plus ou moins de succès <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_24">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah oui, c'était lui. Enfin c'était "SoundHound", mais comme on en voit la pub sur ton site, je suppose que SoundHound est l'appli mobile de midomi</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_25">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_7_5_cabba39e_43789_100x100.png" title="Davf" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_43789 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/43789/1" tid_id="43789">Davf</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_sandb.gif" title=""/> Porteur du Souvenir</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Sinon, j'avoue que j'avais jamais trop réfléchi au fonctionnement des anciens téléphones et pourtant j'ai déjà croisé ceux avec la roue à tourner (très perturbant la première fois que tu en vois un tout de même), et je suis bien content de voir que c'était un fonctionnement à la fois super con et pratique <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"></p><p>Du coup, je me pose la question, nos "bons" vieux modem 56K qui faisait du bruit, c'était un fonctionnement similaire pour communiquer ?</p><p><em><span class="tid_sideNote">Edit : Allez, une petite recherche sur internet à 3h20 du mat, répond à ma question, et oui cela servait bien à cela.</span></em></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_26">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>C'est vachement intéressant tout ça mine de rien. Je n'ai jamais pensé que le téléphone marchait comme ça haha. Ni même que les transformées de Fourier étaient un outil aussi puissant.</p><p>Donc pour voir rapidement j'ai téléchargé le son Dtmf de la touche 1 je l'ai dupliqué afin qu'il soit assez long pour que Scilab puisse travailler avec (cela ne marchait pas au début je suppose donc qu'il n'a pas trop apprécié le son de moins d'une seconde), quand j'affiche le spectre j'ai bien 2 pics distincts aux deux fréquences 697 et 1209. Mais je pense que ce qui va être compliqué c'est de faire trouver les deux pics à Scilab. Parce que quand je lui demande le maximum il me donne 698 (c'est le pic le plus "haut" -et normalement il devrait donner 697 selon Wiki-) mais il ignore donc totalement le 1209. Et je ne pense pas qu'il soit possible de lui dire : "ok maintenant que t'as eu celui ci, tu l'ignores et tu regardes le "deuxième maximum"." Ce serait trop beau <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"><br>Du coup je ne pense pas que ce soit jouable avec Scilab, du moins pas par une méthode à peu près similaire à celle utilisée pour les notes de musique. Après il est tard donc j'ai un peu la flemme de vraiment réfléchir dessus pour le moment, ça joue aussi.<br><em></em><br>Idem pour le fredonnement, j'essayerai demain histoire de ne pas réveiller toute la famille. Cela serait vraiment drôle que cela fonctionne. ^^</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_27">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_e_0_73ed7b76_20333.jpg" title="Selliato" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_20333 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/20333/1" tid_id="20333">Selliato</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\fame.png" title=""/> Chef dÃ©corateur du Grand HÃ´tel</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>Du coup, je me pose la question, nos "bons" vieux modem 56K qui faisait du bruit, c'était un fonctionnement similaire pour communiquer ?</cite></p><p>Le modem classique traduit les données en bruit, quand tu le connecte tu entends d'abord la composition du numéro de téléphone qui va mener chez le fournisseur d’accès à internet, et ensuite ce qu'on entends c'est toute la phase d'initialisation permettant de s'assurer que ton pc est bien authentifié et que le modem parle le bon langage avec ton FAI.</p><p>Si le début est audible, c'est juste pour pouvoir diagnostiquer les problèmes, ensuite tout se fait sans retour à l'utilisateur.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_28">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Mis à part pour la composition du numéro au début, c'est différent, en effet.</p><p>Mais le point commun c'est qu'il s'agit de faire passer des données numériques sur un canal qui n'est conçu que pour faire passer de la voix humaine (le fil du téléphone).</p><p>Les plus vieux modems (ceux du minitel) fonctionnaient de façon assez proche au final : 4 fréquences ; 2 pour un sens, 2 pour l'autre ; une pour le 0, une pour le 1. <br>Faire un modem en python serait un peu délicat (il y a toute la partie protocolaire, où on s'entend sur la version de protocole à utiliser, la vitesse, etc, etc).<br>Mais en revanche, si tu enregistre une "conversation" entre deux modems, avec ton code tu ne devrais pas avoir de mal à décoder le contenu de la conversation.</p><p>C'est pareil pour les cassettes audio qu'on utilisait autrefois pour enregistrer des données ; c'est un support conçu pour l'audio, un matériel (magnétophone) conçu pour l'audio, de la connectique conçue pour l'audio, etc ; du coup, les fréquences utilisées sont des fréquences audibles.</p><br><p>Mais bon, de toutes façons, audibles ou non, comme je le disais, on vit dans l'ère de Fourier et Shannon : ça marche comme ça tout le temps ; l'ADSL c'est exactement pareil, sauf qu'il y a tout un bins qui est fait pour utiliser des fréquences non audibles (et autodétecter les fréquences qui marchent, vu qu'il n'y a rien de garanti sur le réseau audio via lequel la majorité des français reçoivent internet).<br>Les transmissions radios, c'est pareil ; avec une onde électromagnétique certes, mais sinon pareil. La TNT, le Wifi, la FM, la 3G, etc, etc</p><p>A chaque fois, il s'agit juste de repérer si une fréquence donnée est présente ou non dans un signal (pas forcément avec une transformée de Fourier ; parce que Fourier est trop puissant pour ce qu'il y a à faire : quand tu t'intéresses qu'à une seule fréquence à la fois, tu n'en as pas besoin).</p><p>Il y a des méthodes différentes (modulation d'amplitude (aka AM), modulation de fréquence (aka FM), modulation de phase ...) mais le principe à la fin c'est de repérer un pic fréquentiel donné, et de regarder ses caractéristiques (en AM, regarder son amplitude, en FM regarder sa fréquence, qui varie un peu autour de la fréquence cible).</p><p>Les problèmes sont les mêmes que ceux auxquels tu te frottes (bruits, harmoniques, etc ; en général on s'arrange pour choisir des fréquences dont les harmoniques ne viennent pas interférer avec d'autres fréquences ; quoi que pour la 4G et la TNT, ça a raté...)</p><p>Si ton PC était ultrarapide, tu pourrais coller une antenne et digitaliser le signal reçu (avec un super digitaliseur, qui fonctionne à une fréquence d'échantillonage en Ghz) ; et ensuite, en faisant du Fourier dessus, tu verrais des tas de pics de fréquences. <br><img src="http://kube.muxxu.com/img/icons/play.gif" alt=":kube_chest_20:" class="tid_ico"> Certains pics sont des stations de radio AM (il suffit de coller la valeur de ce pic 44100 fois par seconde dans un wav, et tu as un fichier audio de l'émission de radio), <br><img src="http://kube.muxxu.com/img/icons/play.gif" alt=":kube_chest_20:" class="tid_ico"> d'autres sont des stations FM (il suffit de coller dans un wav l'écart entre la fréquence du pic et la fréquence "ronde" dont il est proche, et tu as un fichier audio d'une émission FM), <br><img src="http://kube.muxxu.com/img/icons/play.gif" alt=":kube_chest_20:" class="tid_ico"> d'autres sont des émissions de TV analogique (suffit de coller l'amplitude dans un fichier PPM, en changeant de ligne à chaque 0, et tu as une image de ce qui passe à la TV) (si tu veux la couleur, il faut refaire un coup de fourier, et faire du YUV, c'est un peu plus coton, mais c'est toujours pareil)<br><img src="http://kube.muxxu.com/img/icons/play.gif" alt=":kube_chest_20:" class="tid_ico"> d'autres sont des données numériques, comme la TNT (qui ne sont jamais que des paquets MPEG-TS), le wifi, la 3G, etc. Et ça marche en gros comme ce que j'ai décrit sur les modem.</p><br><p>Au final, le fait que dans les exemples dont on a parlé (DTBF et Modem) les fréquences sont audibles n'est qu'un tout petit détail de rien du tout dans l'histoire. Ça ne change rien au principe : ya des tas de fréquences, et si tu les isoles (avec Fourier ou autre) tu y trouves les données qui t'intéressent.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_29">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_e_0_73ed7b76_20333.jpg" title="Selliato" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_20333 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/20333/1" tid_id="20333">Selliato</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\fame.png" title=""/> Chef dÃ©corateur du Grand HÃ´tel</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Pour ton hypothèse de fréquence dépendant uniquement de la ligne et de de la colonne du clavier, <a target="_blank" href="http://fr.wikipedia.org/wiki/Code_DTMF">c'est bien le cas</a>.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_30">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Pour le coup des deux maximums : ben si, c'est comme ça qu'on fait ; on cherche le 2e maximum.</p><p>Si vraiment tu as besoin de 10.000 premiers maximums, alors mieux vaut trier le tableau. Mais sinon la méthode la plus efficace reste de chercher les deux premiers.</p><p>Avec quand même un minimum de filtrage : par exemple tu ne cherche que parmi des maxima locaux (les fréquences qui sont plus élevées que leur deux voisines).</p><br><p>Mais ceci dit, dans le cas de DTMF, des modems, des cassettes de données, ... c'est plus simple que ça : tu sais déjà quelles sont les fréquences que tu vas observer ; inutile d'aller chercher des maximums. Il te suffit de regarder direct la bonne fréquence.</p><p>Dans le cas des accords de guitare, en revanche, ben si, faut chercher les N premiers maximums. Pour faire bien, il faudrait chercher le maxi, puis virer de ton histogramme ce maxi <strong>et ses harmoniques</strong>, et recherche le maxi dans ce qui reste, virer le 2e maxi et ses harmoniques de l'histogramme, etc, etc</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_31">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oui, j'ai bien compris la théorie. Cela dit je ne vois pas comment "réduire" le domaine de recherche du maximum en supprimant celui que j'ai déjà trouvé justement. Je ne sais même pas si c'est faisable en scilab, je n'ai rien trouvé sur Internet pour l'instant en tout cas.</p><p>Au début je me suis dit que je pourrais faire un bête calcul de dérivée et regarder les points où elle s'annule : mes maxima locaux. Je pense que cela marcherait avec un accord bien propre créé mais sûrement pas avec quelque chose d'enregistré à cause du bruit etc, la dérivée donnerait sûrement n'importe quoi, non ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_32">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ta dérivée sera plus bruitée que ton signal. Mais bon, pas la peine de dégainer un schéma de dérivation pour trouver un maximum local.<br>Il suffit de dire que tu ne t'intéresses qu'aux y tels que y[i]&gt;y[i-1] et y[i]&gt;y[i+1]<br><br>La dernière fois que j'ai joué avec des cartes son, le spectre (iie, la fft du signal) qu'on y trouvait était quand même assez "lisse", donc ça devrait suffire pour ne garder plus que que quelques pics intéressants.<br><br>Tu passeras de quelques dizaines de milliers de valeurs, à quelques dizaines de pics. <br>Et ensuite, c'est assez simple de trouver quel est le plus grand, quel est le 2e plus grand, etc...</p><pre>var pics=[];
for(var i=1; i&lt;y.length-1; i++){
&nbsp;&nbsp;&nbsp;// Si i est un pic, j'ajoute i à la liste des pics
&nbsp;&nbsp;&nbsp;if(y[i]&gt;=y[i-1] &amp;&amp; y[i]&gt;y[i+1]) pics.push(i)
}

// Maxs est le tableau des ? plus grandes fréquences
var maxs=[-1, -1, -1] ;
// On parcours tous les pics
for(var i=0; i&lt;pics.length; i++){
&nbsp;&nbsp;&nbsp;// Si le pic i est plus grand que le ie maxi
&nbsp;&nbsp;&nbsp;for(var j=0; j&lt;maxs.length; j++){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(y[pics[i]] &gt; maxs[j]){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;On décale les maxis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var k=j+1; k&lt;maxs.length; k++){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxs[k]=maxs[k-1];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// et on y insère le pic i
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxs[j]=y[pics[i]];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Et on arrête (important : si le pic i
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// est plus grand que le 2e maxi, alors
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// il est aussi plus grand que le 3e, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// mais c'est pas pour autant qu'il faut
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// l'insérer aussi entre le 2e et le 3e
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;}
}
// maxs contient les 3 premières fréquences
</pre><p>Je fais ça en une sorte de Javascript, parce que j'ai beau programmer en scilab de temps en temps, c'est pas encore une langue "courante" pour moi.</p><p>Bon, là, je fais un algo en&nbsp;2 passes pour la lisibilité ; pour comprendre ce qui se passe : d'abord on sélectionne les maxima locaux, et ensuite, parmi ces maxima, on cherche les plus intéressantes.</p><p>En réalité, le plus malin serait de le faire en une fois :</p><pre>// maxs est le tableau des ? plus grandes fréquences
var maxs=[-1, -1, -1] ;
// On parcours tous les pics
for(var i=1; i&lt;y.length-1; i++){
&nbsp;&nbsp;&nbsp;//&nbsp;Si c'est pas un maxima local, ça ne m'intéresse pas
&nbsp;&nbsp;&nbsp;if(y[i]&lt;=y[i-1] || y[i]&lt;y[i+1]) continue;
&nbsp;&nbsp;&nbsp;// Si le pic i est plus grand que le ie maxi
&nbsp;&nbsp;&nbsp;for(var j=0; j&lt;maxs.length; j++){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(y[i] &gt; maxs[j]){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// On décale les maxis
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var k=j+1; k&lt;maxs.length; k++){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxs[k]=maxs[k-1];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// et on y insère le pic i
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxs[j]=y[i];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Et on arrête (important : si le pic i
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// est plus grand que le 2e maxi, alors
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// il est aussi plus grand que le 3e, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// mais c'est pas pour autant qu'il faut
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// l'insérer aussi entre le 2e et le 3e
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;}
}
// maxs contient les 3 premières fréquences</pre><p>Si tu t'intéresses à plus que 2 ou&nbsp;3 fréquences, le plus efficace serait sans doute de garder les maxima locaux (comme dans la première boucle de la première version), et de les trier avec une fonction toute bête de tri :</p><pre>var pics=[];
for(var i=1; i&lt;y.length-1; i++){
&nbsp;&nbsp;&nbsp;// Si i est un pic, j'ajoute i à la liste des pics
&nbsp;&nbsp;&nbsp;if(y[i]&gt;=y[i-1] &amp;&amp; y[i]&gt;y[i+1]) pics.push(i)
}
pics.sort(function(a,b){return y[a]&lt;y[b];});</pre><p>Par "virer le pic avant de chercher le 2e", j'entendais une autre méthode, qui a l'avantage de réutiliser ce que tu as déjà fait</p><pre>son=loadwave(a)
X=fft(son)
y=abs(X)
[m,i]=max(y)
//&nbsp;Faire des trucs avec m,i (afficher la note par ex)
y[i]=0;
// Recommencer après avoir viré ce premier max ; 
// le max de ce qui reste est le 2e max
[m,i]=max(y)
// Afficher la note correspondant à m,i, le 2e max
y[i]=0;
[m,i]=max(y)
// Afficher la note correspondant à m,i, le 3e max
etc
</pre><p>L'avantage de cette méthode, outre le fait qu'elle fait assez peu de modif par rapport à ton code, c'est qu'elle permet une plus grande liberté sur ce qu'on appelle "virer le max".</p><p>Par exemple, il y a de fortes chances que si 440 Hz est un max, alors 441 Hz sera pas mal non plus (pb qui est réglé par mes algos d'avant, car ils ne s'intéressent qu'au maxima locaux, et 441 n'en est pas ; mais pas avec cette méthode).&nbsp;Mais c'est pas grave ; il suffit que tu mettes à 0 non pas y, mais tout un voisinage de y<br>Cad remplacer y[i]=0 par</p><pre>for(j=round(i*0.975); j&lt;round(i*1.025) j++) y[j]=0; </pre><p>(Ce qui met à 0 une zone correspondant à 5% de la fréquence, autour du pic : comme 5% est ce qui sépare, environ, deux 1/2 tons)</p><p>Mais aussi, tu peux, de la même façon, virer les harmoniques (ce qui est faisable, mais plus chiant à faire, avec mon premier algo) :<br>Il suffit que tu mettes aussi à 0 les fréquences multiples de i :</p><pre>for(k=1; k&lt;5; k++){
&nbsp;&nbsp;&nbsp;for(j=round(i*k*0.975); j&lt;round(i*k*1.025); j++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y[j]=0;
&nbsp;&nbsp;&nbsp;}
}</pre><p>De cette façon, la recherche d'un 2e maximum ne pourra ni désigner le max déjà trouvé, ni une fréquence très proche de ce max déjà trouvé, ni une des 5 premières harmoniques de cette fréquence ou une fréquence proche d'une de ces 5 premières harmoniques.&nbsp;</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_33">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_6_c_ed01ae68_1711366_100x100.jpg" title="Ralof" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_1711366 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/1711366/1" tid_id="1711366">Ralof</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_jsham.gif" title=""/> Gardien des archives</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oh, merci pour cette belle lecture.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_34">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 27 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Merci beaucoup Ayalti. J'ai assez globalement compris l'idée.<br>En fait je dis à Scilab : "au maximum que tu m'as trouvé ainsi que tout autour et à des valeurs multiples de celui-ci la fonction y vaut 0, maintenant trouve moi le prochain pic."</p><p>J'ai essayé de la mettre en oeuvre et de reconnaître donc deux pics assez simples : ceux du dtmf 1 de deux secondes que j'ai fait hier soir. Facile à vérifier car je sais déjà ce que je suis censé trouver.</p><p>J'ai donc entré ça :</p><p><cite>function functi(a)<br>cd<br>son=loadwave(a)<br>X=fft(son)<br>y=abs(X)<br>[m,i]=max(y)<br>I=i/2<br>j=log2(I/32.70)<br>k=round(j*12)<br>f=floor(k/12)<br>n=pmodulo(k,12)<br>disp(f,n)<br>y(i)=0<br>for h=round(i*0.975):round(i*1.025)<br>y(h)=0<br>end<br>for w=1:5<br>for c=round(i*w*0.975):round(i*w*1.025)<br>y(c)=0<br>end<br>end<br>[m,i]=max(y)<br>I=i/2<br>disp(I)<br>j=log2(I/32.70)<br>k=round(j*12)<br>f=floor(k/12)<br>n=pmodulo(k,12)<br>disp(f,n)<br>endfunction<br></cite></p><p>Le premier pic est bon, pas de problème, malheureusement pour le deuxième il me donne 7318.5, ce qui est 6 fois plus que les 1209 attendus <img src="../../../../gfx/square/sad.png" alt=":(" class="tid_ico"></p><p>Donc j'ai dû chier quelque part. Enfin merci quand même, j'obtiens quand même deux valeurs différentes ce qui est une petite victoire en soi <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"><br><em></em><br>PS : j'ai essayé de chanter, et le programme initial reconnaît toujours la même chose : Do de l'octave -6 (wtf).</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_35">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Petite remarque esthétique :<br>ton</p><pre>y(i)=0</pre><p>est redondant avec ton</p><pre>for h=round(i*0.975):round(i*1.025)
&nbsp;&nbsp;&nbsp;y(h)=0
end</pre><p>(quand tu mets à 0 tout autour de i, ça met y(i) à 0 dans le lot)<br>qui lui-même est redondant avec ton</p><pre>for w=1:5
&nbsp;&nbsp;&nbsp;for c=round(i*w*0.975):round(i*w*1.025)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y(c)=0
&nbsp;&nbsp;&nbsp;end
end</pre><p>(quand tu le fais pour tous les multiples de 1 à 5, ça le fait notamment pour 1)<br>J'avais mis les 3 algos comme "montée en puissance" ; ils se remplacent et de s'ajoutent pas</p><p>Pour faire bien, d'ailleurs, il ne faudrait pas s'arrêter au 5 que j'ai choisi arbitrairement ; il faudrait continuer ad vitam pour toutes les valeurs de w, tant que i*w*0.975 ne dépasse pas la fréquence maxi (et dans la boucle "for c" faire gaffe qu'on est pas à cheval sur la fréquence maxi, encore que je crois qu'en scilab, c'est pas un drame si on met de 0 là où il n'y avait encore rien)</p><br><p>Pour tes chiffres, comme ça, là, je ne vois pas bien d'où peut venir ce 7318<br>Tu as essayé de tracer le spectre (le résultat de la fft) pour voir la gueule qu'il a ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_36">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Haha je devais être un peu fatigué, en effet c'est redondant.<br><em></em><br>Après la suppression : <a target="_blank" href="http://www.pixenli.com/images/1404/1404060520052188500.jpg">là.</a><br>Avant la suppression : <a target="_blank" href="http://www.pixenli.com/images/1404/1404060670013833400.jpg">ici</a><br><em></em><br>C'est assez intéressant de tracer ces graphes, je crois que ça a résolu le problème.<br><em></em><br>On voit les deux fréquences qui m'intéressent (en n'oubliant pas qu'il faut diviser par deux)et on voit celle qui m’embête (à 14600 et des poussières) je suppose que les deux fréquences là bas au bout sont des harmoniques des fréquences que l'on cherche ? Et si elles sont aussi loin c'est que les précédentes ont bel et bien disparu. Peut être qu'en augmentant la valeur de w je pourrais les faire disparaître, celles du bout. Donc j'ai augmenté w jusque 20 et ça n'a rien changé. Du coup je me demande si ce ne sont pas les 5% qu'il faudrait augmenter ? J'ai donc essayé 0.9 et 1.1, et j'ai trouvé quelque chose de différent...1213 Hz. Ce qui est très proche de ce que je cherchais. Du coup je pense que là avec ces valeurs là le programme est capable de reconnaître le numéro d'une touche de téléphone à partir du son qu'elle a produit ^^<br>Cela dit je doute que cela soit aussi simple pour un accord. Je n'ai pas encore trouvé d'accord de guitare au format .wav sur Internet. Je vais continuer mes investigations <img src="../../../../gfx/square/razz.png" alt=":P" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_37">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 29 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>PS : J'ai refait pour le 0 et je trouve 980 et 1394 (wiki : 1336 et 941)<br>Du coup je pense que c'est assez fiable. (c'est possible que la marge d'erreur vienne du fait que je "duplique" le son initial de manière à ce qu'il fasse 2 secondes ? -c'est à dire que je le copie / colle bout à bout n fois jusqu'à ce qu'il fasse 2 secondes-)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_38">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Tu l'as échantillonné comment ton dtmf ?<br>Ce serait pas à 8 kHz par hasard ?</p><p>Si oui, si tu veux savoir comment je le sais <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"> :<br>la fonction fft de scilab te retourne la fft d'un signal complexe. Sur un signal réel, le résultat est pair. <br>Dit autrement : <strong>tu ne dois lire que la première moitié du résultat</strong>. Le reste c'est la répétition à l'envers du même résultat</p><p>Les deux premiers pics que tu vois, à 697 et 7318, correspondent au même pic (697, et 8000-697, ce qui ne fait pas tout à fait 7318, mais vraiment pas loin).</p><p>Donc, non, les deux autres pics que tu vois ne sont pas des harmoniques ; ce n'est que le miroir du au fonctionnement spécifique de la fft de scilab. Il faut juste considérer que le tableau retourné par "fft" a une taille de n/2 et pas de n.</p><p>De toutes façons, sur un signal DTMF il ne devrait pas y avoir d'harmonique, puisque ce sont des sinusoïdes pures. C'est sur tes accords de guitare ou tes chantonnements que tu verra des harmoniques.</p><br><p>Pour la précision, de tes résultats, ça peut venir de plein de choses. Peut-être un peu de l'histoire de la duplication (qui ne doit pas se faire pile au bon moment de la sinusoïde ; en tous cas pas pour les deux sinusoïdes à la fois).<br>Peut être l'échantillonage faible (8 khz c'est pas de la qualité CD) ; peut-être de la résolution "verticale" (si c'est sur 8 bits par exemple). <br>Mais peut-être aussi bêtement de la précision de toute la chaîne qui a servi à fabriquer ce signal. Ça dépend d'où il vient. Est-ce un signal fabriqué informatiquement directement dans un wav ? Ou est-ce qu'un type a enregistré le son d'un téléphone ?<br>Si c'est le 2e, il ne faut pas s'attendre à ce que l'horloge de sa carte son soit une horloge atomique ; il peut y avoir un décalage de ce côté ; plus l'erreur du téléphone lui-même ; plus le léger bruit ; etc.</p><p>Cela dit, ça fait des écarts de 4% dans le cas le pire (le 1336 du 0), c'est un petit peu beaucoup quand même (ça fait une erreur de presque 1/2 ton)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_39">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah en effet je n'avais plus pensé que sur un signal "parfait" il n'y aurait forcément pas d'harmoniques <img src="../../../../gfx/square/redface.png" alt=":}" class="tid_ico"> Du coup il suffisait que le programme supprime des valeurs "assez loin" pour que l'on ait plus de problème.<br>Et oui le signal est échantillonné à 8000 Hz, bien vu ! <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"> <br>Je ne comprends pas pourquoi le phénomène n'est pas présent à 44100 par contre, pourquoi 8000 en particulier ?</p><br><p>Sinon j'ai eu les fichiers wav <a target="_blank" href="http://www.audiocheck.net/audiocheck_dtmf.php">ici</a>, je suppose que ce ne sont pas des enregistrements.<br>Et oui c'est plutôt un gros écart mine de rien, sur un son "réel" je pense que cela ne fonctionnerait pas. Enfin j'étais quand même vachement content que j'ai eu le "bon" résultat, même si au final c'était un petit peu un coup de bol puisque j'ai juste rasé tout ce qui ne me plaisait pas haha ^^'</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_40">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_c_c_f0dfe203_430289_100x100.png" title="Nadawoo" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_430289 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/430289/1" tid_id="430289">Nadawoo</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">Pingouin pour</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <span class="tid_preCite"><span class="tid_user tid_user_43789 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="43789">Davf</span></span><cite>Du coup, je me pose la question, nos "bons" vieux modem 56K qui faisait du bruit, c'était un fonctionnement similaire pour communiquer ?</cite><p><a target="_blank" href="https://www.youtube.com/watch?v=hWNr9FBJhqQ">Nostalgie...</a><br>J'ai trouvé un <a target="_blank" href="http://www.laboiteverte.fr/wp-content/uploads/2013/02/son-bruit-modem-56k.png">schéma compliqué</a> qui explique tout ces bruits, mais moi j'ai une interprétation beaucoup plus simple :</p><p>1) Si ça bloquait une minute sur le "tchhh" : il fallait relancer la connexion parce qu'il allait pas arriver à se brancher au réseau.</p><p>2) Quand le "tchhh" était fini : tu pouvais demander ton adresse dans le navigateur. Si tu étais un optimisateur, tu tapais l'adresse avant de lancer la connexion pour économiser ton forfait.</p><p>3) Après le "tchhh" : chaque minute de navigation te rapprochait de la fin de ton forfait (nombre d'heures limité par mois). Toi dépasser forfait = toi consommer hors forfait = toi payer un max.</p><p>Plus simple, non ? <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"></p><p>Il y a encore quelques années, on pouvait voir à la télé des reportages qui utilisaient le bruit des modems 56k pour illustrer une connexion à internet, alors que tout le monde était déjà l'ADSL depuis belle lurette...</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_41">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_user tid_user_655 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="655">Banane</span> : même à 44100 tu aurais eu la même chose. Quoi qu'il arrive, seule la première moitié du tableau retourné est la fft du signal. Le reste, il ne faut surtout pas en tenir compte, car ça ne veut rien dire d'intéressant pour ce que tu es en train de faire (en pratique, vu que tu as un signal "réel pur", c'est un miroir de ta fft, mais bon, ça c'est pour l'anecdote ; tu dois juste surtout ne pas le regarder).</p><p>C'est pas une question de "ne pas regarder trop loin". C'est juste une question de ne pas traiter comme un spectre des données qui n'en font pas partie. D'autres librairies de fft fonctionnent autrement ; mais celle de scilab a comme caractéristique (pour ceux que tu en fais - évidemment il y a des gens à qui ça sert) que la réponse est contenue uniquement dans la première moitié du tableau retourné.</p><p>Si ça avait été 44100, tu aurais eu 4 pics : un à 697, un autre à 1209, un autre à 42891, un autre à 43403 (enfin, tu aurais cru avoir un pic à 42891 et 43403 ; mais ça n'est pas le cas ; déjà c'est pas des fréquences audibles, et encore une fois, cette moitié du tableau ne veut pas dire ça)<br>Et je t'aurais dit "tu n'est pas à 44100 Hz par hasard", ce que j'aurais deviné en constatant que 697+43403=44100 <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p><p>Dans un échantillon à 8khz, de toutes façons il ne peut pas exister de fréquence plus grande que 4000 Hz (c'est le fameux théorème de Shannon qui le dit).</p><p>Fin bref, faut que tu coupes le tableau X en deux. Genre en remplaçant</p><pre>y=abs(X)</pre><p>par</p><pre>y=abs(X(0:size(X)/2)</pre><p>(tapé un peu au pif, je ne connais pas la syntaxe exacte pour extraire un morceau de tableau)</p><br><p>Sinon, l'imprécision du résultat est étonnante ; mais elle ne m'inquiète pas plus que ça pour l'accord de guitare. Si tu as réussi sur une note, ya pas de raison que ça ne marche pas sur plusieurs.<br>Ça ne pourra pas servir pour accorder une guitare avec une erreur de 4%. Mais pour jouer à détecter les accords, si.</p><p>Pour la voix, c'est bizarre ton do(-6). Ce serait intéressant de voir le spectre de ça aussi (tkt, si tu postes des courbes, la résolution sera trop faible pour qu'on puisse faire une fft inverse et reconstituer ta voix^^)</p><p><span class="tid_preCite">nadawoo</span><cite>Il y a encore quelques années, on pouvait voir à la télé des reportages qui utilisaient le bruit des modems 56k pour illustrer une connexion à internet, alors que tout le monde était déjà l'ADSL depuis belle lurette...<br></cite>C'est le paradoxe habituel du cinéma : difficile de lâcher les trucs qui sont un peu le symbole d'une profession. Ils ont eu aussi du mal à abandonner les disquettes (parce que c'est quand même beaucoup plus parlant du point de vue scénario d'avoir un morceau de plastique bien identifié, filmable, qui représente les données précieuses). Et ils n'ont pas encore franchement abandonné les écrans au phosphore vert, le 75 bds (les caractères qui s'affichent à 7 caractères par seconde comme sur un minitel, et en faisant "clic-clic-clic" pour charque caractère affiché). Dans un autre domaine, les scientifiques y ont gardé le triptique "blouse+tableau noir+craie" bien après que tout le monde avait un tableau blanc ; et quand Hollywood s'est débarassé enfin du tableau noir, c'est pour le remplacer par la vitre transparente+marqueur blanc, que personne n'a vraiment.</p><p>C'est le même symbolisme qui fait que c'est en tirant une balle sur l'écran qu'on détruit des données. Et qu'un piratage se voit toujours un peu parce que l'écran clignote un peu pendant 1 seconde</p><p>Mais à côté de ça, ça fait 30 ans que leurs écrans verts au phosphore qui affichent 7 caractères par seconde ont des super interfaces 3D tactiles et parlent en langue naturelle</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_42">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oui d'accord je vois pourquoi tu as compris que c'était 8000 Hz. Le théorème de Shannon dit donc que tout ce qui est au dessus de 4000 Hz ce sont des informations que l'on connaît forcément déjà ? Idem en 41000 Hz pour tout ce qui est au dessus de 20500 c'est ça ?<br><em></em><br>Sinon voilà un "<a target="_blank" href="http://www.pixenli.com/images/1404/1404128658097446300.jpg">la</a>" (à savoir j'ai chanté "LAAAAAAAAAAAAAAAAAAAAA pendant 2 secondes)<br>Le graphique est moins sale que ce que je pensais obtenir (edit: je crois que je me suis trompé de fréquence d’échantillonnage sur celui ci, j'ai sûrement laissé la valeur par défaut de scilab, il faut donc tout multiplier par 2), cela dit je ne comprends pas du tout le résultat du programme du coup, il me donne encore une fois do, -6, -6. Pour te donner le graphique j'ai utilisé la fonction analyze de Scilab. En fait j'ai l'impression que la fft a des problèmes là parce que quand je refais manuellement mon programme et que je lui demande de plot(y) (c-à-d la valeur absolue de la fft du son) il me renvoie un graphique blanc et : <br><cite>!--error 999 <br>set : Le handle n'est plus valide.<br>at line 4 of function generic_i_h called by : <br>at line 2 of function %c_i_h called by : <br>at line 389 of function plot called by : <br>plot(y)</cite><br>Idem quand je lui demande de plot(X)<br>Ensuite pour i il me donne 2 valeurs 1 et 2. Ce qui explique pourquoi le log est négatif ensuite et donc pourquoi il trouve un do et un nombre négatif. Mais je ne vois pas pourquoi ça ne fonctionne pas.<br><em></em><br>Sur mon la, après zoom : premier pic 220, second pic 430, troisième 645 et le quatrième tout petit 858. (à multiplier par 2)<br>Les deux premiers correspondent environ à des "la" mais les deux dernières, voilà quoi. <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico"><br><em></em><br>Je me dis que le problème vient sûrement du fait que j'ai deux canaux d'entrée (ça explique les deux valeurs) quand j'enregistre, j'ai essayé avec un seul canal : <a target="_blank" href="http://www.pixenli.com/images/1404/1404130422003722700.jpg">résultat de l'analyze</a>.<br>Et le programme donne : ré#, 5 (1244 Hz) Cela me plait plus car cela correspond environ avec le graphe. Cela fait de moi un piètre chanteur.<br><em></em><br>Edit : J'ai essayé une nouvelle fois en mono en chantant un "dooooooo" assez grave et le programme me renvoie à nouveau do -6 <img src="../../../../gfx/square/sad.png" alt=":(" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_43">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oui, en gros le théorème de Shannon dit que si on échantillonne à 8000 Hz, alors on a les infos qui concerne toute les fréquences jusqu'à 4000 Hz. <br>En fait il dit l'inverse, mais en pratique ça revient au même : il dit que si on veut toutes les fréquences jusqu'à 4000 Hz, alors il faut échantillonner à 8000 Hz.</p><p>Toutes tes courbes sont très normales.&nbsp;Ce que tu vois ce sont des harmoniques. 645, c'est pas si loin de 220*3, 858 pas si loin de 220*4.</p><p>La précision est décevante. C'est pas suffisant pour savoir virer à coup sûr les harmoniques (puisque pour virer 858 quand on a trouvé 220, il faut aller au delà des 2,5% de marge d'erreur - pile à 2,5% on vire 858, mais pas le voisinage de 858 qui est assez haut aussi).<br>C'est pas suffisant pour une application d'assistance à l'accordage.</p><p>Mais bon, mis à part cette légère imprécision, c'est parfait : on voit des pics bien nets, qui correspondent à la note que tu chantes et ses harmoniques (soit dit en passant, on voit que la bonne stratégie serait plutôt de détecter le premier pic, et pas forcément le plus haut, avant de virer les harmoniques).</p><p>En échantillonant à 44100 ou même à &nbsp;48000, tu arriveras sans doute à un peu mieux.</p><p>Pour l'histoire de l'erreur, du do(-6), etc, je ne vois pas d'où ça vient, mais probablement d'un problème d'informatique et pas de mathématiques ou de physique.<br>Je note que la courbe que tu montres ne contient pas de données en dessous de 150, ce qui est assez bizarre.&nbsp;Est-ce que scilab ne te colle pas des cases de "NaN" ou un truc du genre au début ?<br>Quelle est la valeur de ton do(-6) ?&nbsp;Cad de "m" dans ton code (i est la fréquence du pic, m son intensité ; est-ce que "m" ne vaut pas une valeur aberrante par hasard ?)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_44">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Mon enregistrement est à 44100, y'avait que les dtmf qui étaient à 8000 ^^ Et la précision n'est pas terrible en effet.<br>Sur le dernier, c'est à dire le "dooo" j'ai i=1 et m=3606 et des poussières.<br><em></em><br>C'est quoi des cases de NaN ? <img src="../../../../gfx/square/razz.png" alt=":P" class="tid_ico"><br><em></em><br>PS : je ne vire pas d'harmoniques dans mon premier programme, j'aurais du utiliser l'autre ? ._.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_45">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>NaN = "not a number".</p><p>J'entendais par là des cases avec un truc, n'importe lequel, signifiant que scilab n'a pas réussi à donner une valeur, n'a pas de valeur pour cette case.</p><p>i=1, tu admettras que c'est bizarre ; c'est juste la première case en fait.<br>Et m=3606, ça jure un peu avec tout le reste de ta courbe qui ne dépasse jamais 0,1.</p><p>Donc, je ne sais pas pourquoi, mais cette valeur n'a juste aucun sens.</p><p>D'ailleurs je viens de regarder la donc : scilab commence ses tableaux à 1.&nbsp;Donc i=1, c'est le coef 0 dans la FFT. Dit autrement, c'est juste la moyenne du signal.</p><p>C'est un problème de signature.&nbsp;Les sons wav peuvent être "signés" ou "non signés".&nbsp;"signé" ça veut dire que l'oscillation se fait entre -32768 et +32767 (pour du 16 bits).&nbsp;"non signé" ça veut dire que le blanc, le "pas de son" est à 32768, et que l'oscillation se fait entre 0 et 65535.</p><p>Si tu lui donnes des données non signées, alors, forcément, la moyenne sera en gros de 32768. Donc le résultat de ta fft à la case 1 sera très élevé.&nbsp;Mais ça ne vient que de ce problème de calage.</p><p>Erreur pire : si tu lui donnes des données signées, mais que scilab interprète en non signé (mais je ne pense pas puisque "loadwave" doit marcher ; sauf si ça a merdouillé qqpart quand tu as fait tes manips de concaténation du son), alors tu déformes totalement le signal.</p><br><p>Enfin bref, normalement, tant que tu utilises "loadwave" sur un wav dont l'entête est correcte, il ne devrait pas avoir de problème de ce côté.&nbsp;Mais il faut soit utiliser un signal signé.&nbsp;Soit ignorer (en plus de la 2e moitié du tableau) la première case du tableau (qui ne correspond que à la valeur du "0"<strong></strong>).<br>Ou, mieux, ignorer tout ce qui est en dessous de 16 Hz, puisque l'oreille humaine ne peut pas entendre si bas de toutes façons.</p><br><br><p>Pour les harmoniques : dès que tu auras affaire à autre chose que des sinusoïdes pures, cad dès que tu discuteras avec qqc d'autre qu'une machine qui fabrique des fréquence (DTMF, modem, etc) il y aura des harmoniques à virer.&nbsp;Les harmoniques c'est ce qui fait que les sons ne ressemblent pas à un "biiiiiiiiiiiiiiiiiiiiiiiiiiiiip".</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_46">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Quand je m'enregistre avec Audacity c'est en "32 bits flottant", mais c'est la même pour tous les sons que j'ai utilisé jusque là donc c'est pas ce qui joue si ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_47">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Tiens, je viens de faire le test de mon côté.</p><p>Sur un échantillon DTMF de 1/16e de seconde (donc très court), j'arrive à trouver deux fréquences de 720 et 1232 Hz.&nbsp;Sachant que c'est précis à +/- 32 Hz quand on travaille à 1/16e de seconde, on est bien dans la fourchette (erreurs de 23 Hz.&nbsp;Etrangement pile 23 d'ailleurs pour les deux).</p><p>On ne peut pas espérer plus précis.</p><p>Toi, tu peux, en apparrence espérer plus précis, parce que tu as un échantillon de 2 secondes au lieu d'1/16e de secondes.&nbsp;Donc, tu as une "résolution fréquentielle" de non plus +/- 32 Hz, mais de +/- 1 Hz.<br>Ce qui fait que tu pourrais t'attendre à ce que en prenant 2 secondes, tu aies un résultat plus précis que le mien (et donc que une erreur de 23 Hz acceptable chez moi ne le soit plus chez toi).</p><p>Sauf que c'est oublier que tu n'as pas plus d'information que moi en réalité.&nbsp;Tu as dupliqué ton signal.&nbsp;Donc l'information supplémentaire que tu ajoutes c'est du bruit.&nbsp;Donc il n'y a pas de raison au final que ton résultat soit plus précis que le mien (j'ai pris 1/16e de seconde, parce que c'est la durée d'un pic DTMF avec le site que tu as donné)</p><br><br><p>Sur le chant ou les accords de guitare, je ne sais pas.&nbsp;Mais bon, ça dépend un peu de ta précision aussi^^</p><p>Bref, rien de très étrange sur la précision au final.</p><p>D'ailleurs, je viens de faire une autre expérience :<br>j'ai généré moi même un signal DTMF, comme ça :</p><pre>sonlong = sin((0:16000)*2*3.14159265*697/8000.0) + sin((0:16000)*2*3.14159265*1209/8000.0)</pre><p>Ça génére 2 secondes de signal DTMF, avec exactement le même algo que le sites que tu as donné<br>J'ai vérifié en faisant la soustraction entre les 2 (le signal de son site, et celui là : ça fait 0 ; c'est donc exactement cette formule que ton site utilise, sauf qu'il fait durer le signal moins longtemos)<br>les seules différences qui existent entre le signal que j'ai fabriqué, et celui que tu as fabriqué (en dupliquant le truc qui vient de ton site) sont :</p><ul><li>Tu as dupliqué ton signal ; chaque "morceau" de signal ne se raccorde pas exactement avec le morceau d'avant. D'où imprécision.</li><li>C'est arrondi à 16 bits près.</li></ul><p>Pour l'arrondi à 16bits près, c'est facile, j'ajoute</p><pre>son16bit = round(16384*sonlong)</pre><p>Donc, la seule différence qui reste maintenant entre ton expérience et la mienne, c'est juste le coup de concaténer des séquences pour atteindre 2 secondes.</p><p>Or, quand je fais de la fft là dessus, j'obtiens très précisément, avec ton code (je ne remplace que "loadwave"<strong></strong>): 1394 et 2418, soit, pile poil 697 et 1209 (c'est quand même la moindre des choses me diras tu, mais c'est bien de le vérifier).</p><p>Bilan : sur DTMF l'mprécision que tu vois ne peut venir que de la seule différence qui existe entre nos signaux respectifs, ie la concaténation (cf première partie pour le "pourquoi" : la concaténation donne une apparence de bonne résolution à un truc qui en réalité ne contient pas assez d'info pour être précis à mieux que +/- 32&nbsp;Hz)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_48">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <span class="tid_preCite"><span class="tid_user tid_user_655 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="655">Banane</span></span><cite>Quand je m'enregistre avec Audacity c'est en "32 bits flottant", mais c'est la même pour tous les sons que j'ai utilisé jusque là donc c'est pas ce qui joue si ?</cite><p>Non, cf message précédent : sur mon expérence DTMF j'obtiens des résultats aussi précis qu'on peut le vouloir, même après avoir artificiellement tronqué mon truc à 16 bits)</p><p>Je viens d'essayer par curiosité de mettre le signal sur 8 bits (je parle de résolution "verticale"<strong></strong>), et ça ne change rien : on a toujours pile poil 697 et 1209.<br>Ce qui est normale ; la "résolution verticale" du signal n'a aucune raison de perturber ce qui est la fréquence principale du signal. D'un point de vue "fourier", ça ne fait que créer des tas d'harmoniques qui rendront le truc moins beau à entendre, mais ça ne fait pas non plus voyager le signal dans le temps, et donc perturber sa fréquence.</p><p>Pour illustrer ça, pense au coup (que tu as sûrement vu, vu que c'est l'exemple typique) de "fourier sur un signal créneau".<br>Fourier sur un créneau, c'est une infinité de sinusoïdes.&nbsp;Mais de toutes façons la première sinusoïde ça reste celle qui a la même fréquence que le créneau. Et quand tu colles un créneau dans un haut parleur, tu entends très nettement exactement la même fréquence que quand tu colles une sinusoïde ; mais en plus pourrie.</p><p>Fin bref, non, on s'en fout de 32 bits flottants, 16 bits, 8 bits, etc. Ca ne change que les harmoniques, et donc la qualité auditive, mais pas l'analyse fréquentielle qui t'intéresse.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_49">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[655]" style="background-color: rgb(194,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_655 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/655/1" tid_id="655">[655]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>D'accord donc c'est bien le fait d'avoir rallongé le son qui a créé le décalage dans les valeurs que j'ai trouvé. (je vais t'avouer que j'ai essayé de le faire le plus proprement possible mais voilà quoi <img src="../../../../gfx/square/happy.png" alt=":D" class="tid_ico">) Si j'avais moi même créé comme tu l'as fait un son de deux secondes je serai retombé sur les fréquences pile. Au final le problème n'est pas dans le programme mais dans ce que je lui ai donné, c'est plutôt cool à savoir. ^^<br><em></em><br>Et oui on a fait très très peu de transformées de Fourier en physique (des séries de Fourier en maths par contre, évidemment) mais on avait vu cet exemple du signal créneau (ainsi que le signal "triangulaire" ). Mais ça reste vraiment intéressant de voir les nombreuses utilités que cela peut avoir.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_50">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Il est impossible de raccorder proprement les morceaux de toutes façons.&nbsp;Les fréquences ont été choisies dans DTMF pour être premières entre elles (ce qui évite tout clash d'harmoniques). <br>Ce qui a pour conséquence qu'il faut attendre 1 seconde entière avant qu'une situation se reproduise à l'identique. Donc on pourrait raccorder proprement deux morceaux d'une seconde pour en fait un morceau de 2 secondes.&nbsp;Mais si les morceaux sont plus petits que la seconde, c'est juste impossible.</p><p>Mais bon, c'est pas pour autant qu'il faut conclure que ta méthode est mauvaise.&nbsp;Au moins elle prouve qqc en situation un peu réaliste.<br>Alors que ce que j'ai fait... construire une sinusoïde et s'émerveiller que la fft en retrouve la fréquence, c'est aussi bête que de multiplier par 2, et s'émerveiller qu'en calculant la moitié je retrouve pile mon nombre de départ^^</p><p>Si tu dégottes un téléphone qui émet un son DTMF, et qui l'émet en continu pendant 1 ou&nbsp;2 secondes, essaye d'enregistrer.&nbsp;Le signal sera bien plus pourri que ce qu'on a fabriqué, mais je ne serais pas surpris que, s'il sera moins propre en amplitude, il le sera beaucoup plus en fréquence (sans tomber pile-poil comme on le trouve : l'horloge du téléphone n'étant pas exactement identique à l'horloge de la carte son qui l'enregistre, il y aura une erreur, mais normalement pas de 4%)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_51">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 juin 2014
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Du coup je l'ai fait moi même.</p><p>En rapprochant le micro de mon casque micro à 2 balles (et c'est pas un euphémisme ; le premier prix de chez LDLC) à l'écouteur de mon téléphone fixe à environ le même prix, j'ai enregistré 5,28 secondes de ce qui se passe quand j'appuie sur le 1.<br>Comme j'utilise jamais mon PC pour enregistrer, et que j'avais la flemme de trouver quelle était la source qu'il fallait utiliser, j'ai configuré mon mixer pour utiliser toutes les sources à la fois.&nbsp;Donc l'enregistrement que j'obtiens est un mélange du bruit blanc qui passe par l'entrée "ligne" arrière du PC, par l'entrée "ligne" avant, par l'entrée "micro arrière", par l'entrée "micro avant" (qui est la bonne), et par le micro intégré à la webcam. C'est dire la mocheté de l'enregistrement.</p><br><p>Malgré ça, loadwave, fft, max =&gt; premier pic à 696,97 Hz<br>Deuxième pic à 1208,90 Hz.</p><p>Bref, ça marche très bien, même avec un signal pourri. La conséquence du fait que le signal est pourri, c'est qu'il y a des tas de tous petits pics partout ; il n'y a aucune fréquence franchement à 0.<br>Mais osef : le 3e pic est 20 fois plus petit que les deux qui nous intéresse.&nbsp;Impossible de confondre le bruit avec le signal.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>