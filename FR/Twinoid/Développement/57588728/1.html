<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Quelles applis de notifications en vie ?</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title"><span class="tid_forumTag tid_minor">Demande</span>Quelles applis de notifications en vie ?</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_b_3_7cde7d53_3909380.jpg" title="Lulinu" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 6 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_3909380 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/3909380/1" tid_id="3909380">Lulinu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_armag.gif" title=""/> Coquet</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour à tous !</p><p>J'ai passé pas mal de temps à rechercher des applis/scripts/modules Hordes.fr dans vos sujets, il a l'air d'y avoir plein de trésors mais beaucoup plus disponibles ou en vie..</p><p>Je cherche en particulier des notifications : <br>-quand la porte est encore ouverte quelques minutes avant minuit, <br>-quand Hordes.fr est de nouveau disponible après minuit, <br>-quand la porte manipulée, <br>-quand quelqu'un sort de la ville</p><p>Est ce que vous avez des applis qui possèdent une ou plusieurs de ces fonctions/notifs ?</p><p>Le seul truc que j'ai trouvé pour l'instant : Alerte Hordes sur Chrome, qui a l'air pas mal pour vérifier que le porte n'est pas ouverte et la réouverture du site après minuit</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_b_3_7cde7d53_3909380.jpg" title="Lulinu" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 6 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_3909380 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/3909380/1" tid_id="3909380">Lulinu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_armag.gif" title=""/> Coquet</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>PS, parmi toutes les autres applis que j'ai pu découvrir, si j'ai une recommandation : Die2Nite qui ajoute pas mal de fonctions sympas comme le compte d'objets avant l'anti abus ou la mise à jour BBH</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 6 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>-quand la porte est encore ouverte quelques minutes avant minuit,</cite>Ca je peut te le faire (ça doit pas être trop compliquer) o/<cite>-quand Hordes.fr est de nouveau disponible après minuit, </cite>Easy également je peut te le faire.<cite>-quand la porte manipulée,</cite>Tu veut dire a chaque fois que quelqu'un ouvre ou ferme la porte ? ça devrais pas être trop compliquer<cite>-quand quelqu'un sort de la ville</cite>Ca aussi c'est tout a fait faisable.</p><p>Tu veut une appli ou un userscript ? (l'un sera chiant et long a faire [et faudra payer pour le mettre en ligne sur gogole store] l'autre sera moins long a faire [tout dépend de la qualité visuel que l'on recherche] mais chiant a utiliser pour les utilisateurs qui n'ont jamais vue d'userscript de leur vie...)</p><p><cite>e compte d'objets avant l'anti abus ou la mise à jour BBH</cite>ça aussi c'est easy (+ou-) a rajouter dans un script.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_c_2_db3f8689_8412516_100x100.gif" title="PseudoDernier" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 6 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8412516 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8412516/1" tid_id="8412516">PseudoDernier</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\PonyLogo.png" title=""/> Gentleman kawaiiiii</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Pensez à demander à l'Architectoire avant de coder des petits trucs du genre. La porte ouverte avant minuit, ça devrait passer, mais le reste, mieux vaut avoir validation.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 6 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>J'ai encore rien fait parce que j'ai la flemme de jouer a ce jeu o/</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_3_6_5f5566f2_148_100x100.png" title="Bugzilla" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 6 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_148 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/148/1" tid_id="148">Bugzilla</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\Dark.png" title=""/> DivinitÃ© diabolique</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Je confirme et j'insiste sur ce qu'a dit <span class="tid_user tid_user_8412516 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="8412516">LAbare</span> ci-dessus : il vaut mieux se renseigner auprès de l'Architectoire avant de se lancer dans de telles choses.</p><p>Si certains scripts ou certaines applications sont difficiles à trouver ou n'existent pas (ou plus), c'est peut-être parce qu'ils ne respecteraient pas la <a target="_blank" href="https://twinoid.com/g/architectoire#reglement-scripts">Charte pour les scripts et extensions de navigateur</a> qui explique ce qui est autorisé ou pas.</p><p>En particulier, le point 3 concernant l'automatisation et l'obligation de ménager le serveur pourrait poser des soucis si un script fait des requêtes trop fréquentes au serveur pour vérifier les ouvertures ou fermetures des portes. Un script qui fait quelques requêtes par jour ne devrait pas poser trop de soucis, mais un script qui en fait plusieurs par heure pourrait poser des soucis si de nombreux joueurs l'utilisent.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_6">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_b_3_7cde7d53_3909380.jpg" title="Lulinu" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 7 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_3909380 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/3909380/1" tid_id="3909380">Lulinu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_armag.gif" title=""/> Coquet</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Merci <span class="tid_user tid_user_9401656 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="9401656">Ghost</span>, c'est une super nouvelle que ce soit pas trop compliqué à faire ! Tu aurais des tutos ou des endroits à me conseiller pour débuter ?</p><p>Les userscripts c'est le genre de truc à faire tourner sur Greasemonkey ?</p><p>Ok <span class="tid_user tid_user_8412516 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="8412516">LAbare</span> et @<span class="tid_user tid_user_148 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="148">Bugzilla</span>, à voir si ça fait pas trop de requêtes pour le serveur. En tout cas pour les portes toujours ouvertes genre à 23h50 et la réouverture du site, ça devrait rester léger</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_7">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_e_0_73ed7b76_20333.jpg" title="Selliato" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 10 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_20333 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/20333/1" tid_id="20333">Selliato</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\fame.png" title=""/> Chef dÃ©corateur du Grand HÃ´tel</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Si le but est juste d'envoyer une notification il est possible d'utiliser le système de notification qui existe au moins pour Chrome ( je ne sais pas si il y a un équivalent pour Internet Explorer ou Firefox )<br>Cela peut permettre de développer ça sous forme de site utilisant l'API, ce qui est plus simple pour l'utilisateur et aussi plus sûr.</p><p>Il est d'ailleurs possible dans l'API de demander l'autorisation à l'utilisateur d'utiliser ses données quand il est hors-ligne ( via le refresh_token ), ce qui serait justifié par le fonctionnement de l'application.</p><p>Ainsi pour la disponibilité de Hordes après l'attaque, le site peut faire un nombre de requête raisonnable et envoyer une notification à tout les utilisateurs abonnés.</p><p>Pour ce qui est de notifier des personnes qui sortent de la ville et de l'ouverture/fermeture de la porte si les requêtes ne se font pas par utilisateur mais par ville en utilisant le flux d'un seul membre de la ville tout en envoyant les notifications à tout les joueurs de celle-ci, cela réduit déjà drastiquement le nombre de requête.</p><p>( avec tout ça, par rapport à un simple script Grease Monkey, on divise déjà le nombre de requêtes par le nombre d'utilisateurs pour l'attaque et par jusqu'à 40 pour les autres notifications )</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_8">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 10 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Comme quoi, il n'y a pas de probléme.<br>Seulement des solutions.</p><p>Au cas, ou tu souhaite dév ce genre de truc (Lulinu), je ne pourrais pas t'aider puisque je dév déjà un autre projet (Ghost) donc voilà.</p><p>En revanche je peut t'aider a comprendre le fonctionnement de l'API et te filer 2-3 codes pour pouvoir l'exploiter plus facilement (même s'il n'y a rien de compliquer, pour quelqu'un qui ce lance ça peut représenter des difficultés)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_9">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_b_3_7cde7d53_3909380.jpg" title="Lulinu" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 14 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_3909380 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/3909380/1" tid_id="3909380">Lulinu</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_armag.gif" title=""/> Coquet</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Merci <span class="tid_user tid_user_20333 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="20333">Selliato</span> et <span class="tid_user tid_user_9401656 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="9401656">Ghost</span> pour vos infos !</p><p>Bon ben pour commencer je vais tenter : une notif à 23h45 si la porte est ouverte</p><p>Donc ton refresh_token <span class="tid_user tid_user_20333 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="20333">Selliato</span> serait juste parfait pour ça, tu as un tuto ou un lien pour l'utiliser ?</p><p>Et grave <span class="tid_user tid_user_9401656 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="9401656">Ghost</span> si tu avais quelques bases dont je puisse m'inspirer ou bâtir dessus, ce serait génial =D</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_10">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 14 février 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><a target="_blank" href="https://twinoid.com/developers/doc">Voici la doc si ça peut t'aider</a>, <span class="tid_strike">je t’enverrais les bout de code par mp (un de ces quatre).</span></p><p>Voici un morceau de code (j'le fait de tête donc si ça fonctionne pas dit le) :</p><pre>&lt;?php
header('Content-Type: txt');
$twinoid = array (
 &nbsp; 'access_type' =&gt; 'online', //Ceci et le paramétre pour accédé au donnée seulement lorsque le joueur et en ligne
 &nbsp; 'client_id' =&gt; 0, //Ceci est l'id de l'application
 &nbsp; 'client_secret' =&gt; "Ceci est une fause clé secret",
 &nbsp; 'grant_type' =&gt; "authorization_code",
 &nbsp; 'redirect_uri' =&gt; "https://MeServeurOuSiteWeb.Ghost/",
 &nbsp; 'response_type' =&gt; 'code',
 &nbsp; 'scope' =&gt; "www.hordes.fr",
 &nbsp; 'state' =&gt; 'login',
);
if(!isset($_GET['code'])) {
 &nbsp; header('location: https://twinoid.com/oauth/auth?response_type='.$twinoid['response_type'].'&amp;client_id='.$twinoid['client_id'].'&amp;redirect_uri='.$twinoid['redirect_uri'].'&amp;scope='.$twinoid['scope'].'&amp;state='.$twinoid['state']);
} else {
 &nbsp; $context = stream_context_create($contextOptions);
 &nbsp; $contextOptions = array(
 &nbsp; &nbsp; 'http' =&gt; array(
 &nbsp; &nbsp; &nbsp; 'method' =&gt; 'POST',
 &nbsp; &nbsp; &nbsp; 'header' =&gt; 'Content-type: application/x-www-form-urlencoded',
 &nbsp; &nbsp; &nbsp; 'content' =&gt; "client_id=".$twinoid['client_id']."&amp;client_secret=".$twinoid['client_secret']."&amp;redirect_uri=".$twinoid['redirect_uri']."&amp;code=".$_GET['code']."&amp;grant_type=".
 &nbsp; &nbsp; )
 &nbsp; );$
 &nbsp; json = file_get_contents('https://twinoid.com/oauth/token', false, $context);
 &nbsp; $json = json_decode($json);
 &nbsp; print_r($json); //Affiche le token (enfin sauf exception hein)
}
?&gt;</pre><p>C'est juste un exemple pour t'aider a comprendre comment récup le token, quand t'aura assimiler ça, j'te montrerais comment faire des requetes pour récup ce qui nous intéresse</p><p>(hésite pas a m'envoyer un mp, j'vient rarement sur le forum)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_11">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Eternalfest" style="background-color: rgb(126,204,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 avril 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_7019378 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/7019378/1" tid_id="7019378">Eternalfest</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Attention, l'état (paramètre <strong>state</strong>) <strong>ne devrait pas être une constante</strong> mais <a target="_blank" href="https://fr.wikipedia.org/wiki/Nonce_(cryptographie)">un nonce</a> (nombre aléatoire unique). Il doit être créé lors de la demande de login et consommé lors la réception du code et avant la requête pour le token d'accès. La raison principale est de limiter les attaques CSRF et par rejeu. La réponse de la demande d'autorisation est relayée par l'utilisateur (state et code), il ne s'agit donc pas d'une valeur sûre.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_12">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_3_6_5f5566f2_148_100x100.png" title="Bugzilla" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 30 avril 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_148 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/148/1" tid_id="148">Bugzilla</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\Dark.png" title=""/> DivinitÃ© diabolique</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <span class="tid_preCite"><span class="tid_user tid_user_7019378 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="7019378">Eternalfest</span></span><cite>Attention, l'état (paramètre <strong>state</strong>) <strong>ne devrait pas être une constante</strong> mais <a target="_blank" href="https://fr.wikipedia.org/wiki/Nonce_(cryptographie)">un nonce</a> (nombre aléatoire unique).</cite><p>Non, c'est un mauvais conseil qui risque surtout d'introduire une confusion inutile. Cela semble indiquer que tu as mal compris le but du paramètre "state" et les concepts de sécurité liés à l'API Twinoid et au protocole OAuth (ou plus exactement OAuth2).</p><p>Un nonce est un nombre aléatoire qui n'a généralement aucune signification pour l'application qui l'envoie mais qui sert à éviter qu'une même requête soit répétée. Un nonce n'est utilisable qu'une seule fois.</p><p>Au contraire, le paramètre "state" a une signification pour l'application et peut être réutilisé de nombreuses fois car il sert à indiquer l’état de l'application et n'a pas pour but de la protéger contre certaines attaques. Comme son nom l'indique, le paramètre "state" permet à une application de décrire succinctement l’état dans lequel elle se trouve afin de pouvoir revenir dans ce même état lors du retour de la demande d'identification. C'est utile par exemple pour les applications qui disposent de plusieurs pages, qui permettent à l'utilisateur de s'identifier à partir de n'importe quelle page et qui ont un point de retour "redirect_uri" commun. En incluant dans "state" le nom ou le chemin d’accès à la page actuelle, cela permet d'y revenir après identification et après le passage par le "redirect_uri" commun (sans devoir utiliser de cookie).</p><p>Un nonce sert lorsqu'il y a un risque d'attaque sur le canal de communication entre deux programmes (client et serveur), soit ici entre l'application externe et le serveur Twinoid. Ce genre d'attaque est peu probable et "rejouer" une même requête ne servirait à rien puisque tout ce que l’éventuel attaquant obtiendrait, c'est un code inutilisable sans la clé secrète de l'application.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_13">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Eternalfest" style="background-color: rgb(126,204,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 1 mai 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_7019378 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/7019378/1" tid_id="7019378">Eternalfest</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Le paramètre <strong>state</strong> encode bel est bien l'état de l'application pour une application multi-page mais je maintiens qu'il doit s'agir d'une valeur aléatoire car <strong>il a un rôle à jouer dans la sécurité</strong> est que, quitte à en utiliser, utiliser un nonce apporte des avantages qui peuvent être intéressants.</p><p>Dans l'exemple de Ghost, le client est un serveur PHP: maintenir une association entre la valeur du nonce et l'état correspondant ne devrait pas poser de problème, par exemple pour stocker la page d'origine puis rediriger vers cette page une fois l'authentification terminée.<br>Je reconnais qu'un token CSRF pourrait suffire, mais pour une simple authentification et récupération de token, je trouve un nonce plus simple pour prévenir les attaques.</p><p><cite>Un nonce sert lorsqu'il y a un risque d'attaque sur le canal de communication entre deux programmes (client et serveur), soit ici entre l'application externe et le serveur Twinoid. Ce genre d'attaque est peu probable et "rejouer" une même requête ne servirait à rien puisque tout ce que l’éventuel attaquant obtiendrait, c'est un code inutilisable sans la clé secrète de l'application.</cite><br>Par rapport au rejeu, le paramètre <strong>state</strong> est échangé entre le navigateur de l'utilisateur et l'application externe. Même si le serveur Twinoid voit ce paramètre, c'est le canal navigateur &lt;-&gt; application externe qui bénéficie du nonce. Je suis d'accord que les risques ne sont pas incroyables: on parle d'une plateforme de jeu et d'une simple application, mais par principe il vaut mieux prévenir ce qui est possible.<br>Un scénario d'attaque par rejeu est qu'un navigateur d'utilisateur malveillant peut forcer l'application externe à envoyer un très grand nombre de requêtes au serveur Twinoid. Même si les requêtes d'authentification ne semblent pas compter dans le quota de requêtes (je me trompte peut-être), ça pourrait causer l'application envoyant les requêtes vers le serveur Twinoid à être bloquée. Sans vérification de la requête reçue, comme dans le code ci-dessus, l'application envoie une requête au serveur Twinoid par requête reçue sur la redirect_uri de l'application, même si le code reçu est invalide. Le problème est que l'application ne repère pas l'abus. Bien-sûr, limiter le rythme des requêtes peut-être implémenté de plusieurs manières, le nonce est juste une proposition. En utilisant un nonce, il est possible de faire les vérifications de débit de requêtes lors de l'initialisation de la procédure d'authentification et génération du nonce puis de garantir que la redirect_uri sera appelée au plus une fois de manière légitime pour chaque procédure d'authentification. <br>Tout dépend de la qualité du code du serveur, mais on peut aussi imaginer qu'une double requête d'authentification avec la même clé peut perturber la logique du serveur (la première réussit mais la deuxième échoue avec un "invalid_grant", l'utilisateur était déjà authentifié mais se ré-authentifie, etc.) et causer une erreur serveur ou exposer des données sensibles (comme un stack-trace).<br>Finalement, utiliser un nonce peut aider à mitiger les attaques CSRF en jouant le rôle d'une "form key" en tant que méthode de contrôle.</p><p><a target="_blank" href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)">OWASP - Cross-Site Request Forgery</a><br><cite>Add a per-request <strong>nonce</strong> to the URL and all forms in addition to the standard session. This is also referred to as "form keys". Many frameworks (e.g., Drupal.org 4.7.4+) either have or are starting to include this type of protection "built-in" to every form so the programmer does not need to code this protection manually.</cite></p><p>Selon moi, les attaques par rejeux dans le cadre de Oauth permettent surtout de mettre en évidence des problèmes plus profonds dans le code du serveur. C'est pour ça que je concède qu'un nonce est peut-être trop fort. Je me suis beaucoup attardé sur ça car c'était le sujet de ton message : "pourquoi est-ce que state n'a besoin d'être un nonce".</p><p>Il ne faut pas que cette partie sur l'unicité du nonce masque l'aspect bien plus important de non-prédictibilité du paramètre state. <br><cite>Au contraire, le paramètre "state" [...] n'a pas pour but de la protéger contre certaines attaques.</cite><br>C'est vraiment là là que je ne suis pas d'accord. On peut se demander si <strong>state</strong> doit être un nonce, hash ou autre type de token, mais dans tout les cas il doit être imprévisible. State ne devrait pas être "login" ou tout autre état en texte clair et j'irai jusqu'à dire que conseiller de l'utiliser sans se poser plus de questions est plus dangereux que de prendre un temps de réflexion.</p><p><a target="_blank" href="https://tools.ietf.org/html/rfc6749#section-10.12">RF6749 - The OAuth 2.0 Authorization Framework</a><br><cite>The client MUST implement CSRF protection for its redirection URI.<br> This is typically accomplished by requiring any request sent to the<br> redirection URI endpoint to include a value that binds the request to<br> the user-agent's authenticated state (e.g., a hash of the session<br> cookie used to authenticate the user-agent). The client SHOULD<br> utilize the "state" request parameter to deliver this value to the<br> authorization server when making an authorization request.</cite></p><p>Utiliser <strong>state</strong> pour prévenir des attaques est ni plus ni mois qu'une des recommandations du standard. C'est aussi la recommandation que font la plupart des services d'authentifications majeurs comme Github, Facebook, Google, etc.</p><p><a target="_blank" href="https://developer.github.com/v3/oauth/#parameters">Github</a><br><cite>state string An unguessable random string. It is used to protect against cross-site request forgery attacks.</cite></p><p><a target="_blank" href="https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.0?locale=en_US#logindialog">Facebook</a><br><cite>state. An arbitrary unique string created by your app to guard against <a target="_blank" href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">Cross-site Request Forgery</a>.</cite></p><p><a target="_blank" href="https://developers.google.com/identity/protocols/OAuth2WebServer#redirecting">Google</a><br><cite>You can use this parameter for several purposes, such as directing the user to the correct resource in your application, <strong>sending nonces, and mitigating cross-site request forgery</strong>.</cite></p><p>Je ne vais pas m'étendre sur les CSRF, mais je conseille <a target="_blank" href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)">cet article de l'OWASP</a> à ceux qui sont intéressés. A nouveau, on parle d'un site de jeu donc ce n'est pas la fin du monde si une application externe a un soucis mais il faut en être conscient. Concrètement, un site tiers pourrait forcer les utilisateurs à se connecter à l'application externe et causer des actions non souhaitées par l'utilisateur en l'utilisant (par iframe, xhr, clickjacking ou autre méthode - oui il existe des méthode pour s'en prémunir mais la sécurité est un tout).</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_14">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 1 mai 2017
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>J'ai pas encore tout lut, mais j'aimerais réagir a ceci : <cite>Un scénario d'attaque par rejeu est qu'un navigateur d'utilisateur malveillant peut forcer l'application externe à envoyer un très grand nombre de requêtes au serveur Twinoid.</cite>L'utilisation de l'API Twinoid et limiter avec un quotas de <em>seulement</em> 500/1000 requêtes par jours.</p><p>Le seul effet d'une tel attaque serais de simplement "bloquer" l'accès (et autre fonctionnalité utilisant les infos renvoyer par l'api) au site externe (cible) pendant le reste de la journée.</p><p>Et enfin, sachant que chaque utilisateur laisse des traces en recoupant ces informations il est très simple de mettre un slowtime (de quelques minutes à une heure par exemple) en place qui suffira amplement a limiter ce genre d'attaque.</p><p>Pour moi Bugzilla parle d'or, et j'ai toute confiance en ce qu'il dit.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>