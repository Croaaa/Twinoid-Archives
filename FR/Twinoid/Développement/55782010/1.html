<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>[Js] Traitement de texte</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title">[Js] Traitement de texte</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 3 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour,</p><p>J'ai cette variable :</p><pre>var message = 'Bonjour tout le monde comment allez vous ? Je suis vraiment bavard donc je continue un peu d\'écrire histoire d'avoir une grande chaine a traiter.';</pre><p>Et j'aimerais entouré aléatoirement des partie de ce message avec des crochet "[" ou "]" ... comment faire ?</p><p><strong>Merci d'avance pour votre aide parce que la je séche \O-O/</strong></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 3 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Salut&nbsp;!<br>Tu as besoin de <a target="_blank" href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Math/random">Math.random</a> et <a target="_blank" href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/String/substring">substring</a>.</p><p>Mais peut-être que tu t’es exprimé de manière trop vague et que tu veux isoler des mots de ta chaîne&nbsp;? Dans ce cas tu peux utiliser une expression rationnelle (regexp) avec le <a target="_blank" href="http://www.regular-expressions.info/wordboundaries.html">marqueur <strong>\b</strong></a> qui signifie « limite de mots ». Mais ça ne marche pas avec les caractères accentués.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 3 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Merci,<br>Alors groso modo je souhaite obtenir (par exemple) ça :</p><pre>[B][onjo][ur to]ut le [mo]nde</pre><p>a partir de (par exemple) ça :</p><pre>Bonjour tout le monde</pre><p>Du coup avec Math.random et substring j'ai une vague idée de comment je pourrais mis prendre mais j'vais tenter avec php avant (voir si c'est pas plus simple).</p><p>Edit: puisque php gère mieux le random que le js.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="AngrySquirrel" style="background-color: rgb(116,204,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 4 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9438583 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9438583/1" tid_id="9438583">AngrySquirrel</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour,</p><p><cite>Alors groso modo je souhaite obtenir (par exemple) ça :<br><br>[B][onjo][ur to]ut le [mo]nde</cite></p><p>Il y a plusieurs façons d'arriver à ce résultat, les vraies questions sont:</p><p>- Sur quoi souhaites-tu te baser pour parser tes chaînes de caractères ?</p><p>- Aurais-tu un exemple concret d'utilité de ton exemple ?</p><p><cite>Edit: puisque php gère mieux le random que le js.</cite></p><p>Je ne vois pas ce que tu entends par-là.</p><p>En revanche, je vois que tu passes d'un langage de frontend à un langage utilisé en backend: où est-ce que tu veux utiliser ton outil, exactement ?</p><p>Si tu écris ta fonction en php, il te faudra la porter en JS pour l'utiliser côté client.</p><p>Bonne journée !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 4 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Jquery, fonction .ajax(); qui me permet de traiter un texte avec un script en php quand js est trop limité.</p><p>Voici le code que j'ai fait en php :</p><pre>&lt;?php
$string = 'Bonjour a tous et a toute !!! °éçàazer';
 $message = '';
 foreach(str_split($string) as $str_split) {
 $number = mt_rand(1,5);
 $noColor = array(' ','°','é','ç','à');
 if(!in_array($str_split, $noColor)) {
 if(mt_rand(1,2)===1) $message = $message.'eggs'.$number.'['.$str_split.']';
 else $message = $message.$str_split;
 }
 else $message = $message.$str_split;
 }
$message = htmlspecialchars($message, ENT_QUOTES|ENT_SUBSTITUTE);
?&gt;
&lt;pre&gt;
&lt;?php print_r($message); ?&gt;
&lt;/pre&gt;</pre><p>J'ai mis dans l'array "noColor" les caractère qui me posais probléme et que j'ai identifier (avant il me renvoyais un retour vide puis quand j'ai mis le param ENT_SUBSTITUTE j'ai les dit caractère remplacer par de simple carré (ce qui est mieux qu'un truc "vide"<strong></strong>).</p><p>Edit: si vous avez une solution pour ces caractère spéciaux je prend.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Cavaswaggduslip" style="background-color: rgb(147,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 4 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8702552 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8702552/1" tid_id="8702552">Cavaswaggduslip</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Tu as presque trouvé le code qu'il te faut faire. Il suffit de le changer un peu. Au lieu d'entourer le caractère de [], tu peux faire un compteur "i" qui vaudra 1 au départ et 2 conditions.<br>Si le i vaut 1, on fait un test rand et si le test est bon, on met un [ à gauche du caractère, on passe alors le compteur i à 0. Si le rand est faux, on ne fait rien.</p><p>Si i vaut 0, on fait un test rand et si le test est bon, on met un ] à droite du caractère, on passe alors le compteur i à 1. Si le rand est faux, on ne fait rien.</p><p>Au dernier caractère, si i vaut 0, alors on met une ] à sa droite.</p><p>Pour ton problème d'encodage (les accents), apparemment c'est la fonction string_split qui pose problème.</p><p>La solution est donnée dans les commentaires de la documentation php :</p><cite><pre>function str_split_unicode($str, $l = 0) {
 if ($l &gt; 0) {
 $ret = array();
 $len = mb_strlen($str, "UTF-8");
 for ($i = 0; $i &lt; $len; $i += $l) {
 $ret[] = mb_substr($str, $i, $l, "UTF-8");
 }
 return $ret;
 }
 return preg_split("//u", $str, -1, PREG_SPLIT_NO_EMPTY);
}
</pre></cite><p>tu remplaces la fonction str_split par cette fonction str_split_unicode.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_6">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Cavaswaggduslip" style="background-color: rgb(147,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 4 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8702552 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8702552/1" tid_id="8702552">Cavaswaggduslip</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <cite>Si i vaut 0, on fait un test rand et si le test est bon, on met un ] à <strong><em>gauche</em></strong> du caractère, on passe alors le compteur i à 1. Si le rand est faux, on ne fait rien.</cite><p>Désolé, j'ai pas eu le temps d'éditer ^^.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_7">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 4 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ok merci, j'utilise <a href="http://php.doc/" target="_blank">http://php.doc/</a> (qui est un site local, d’ailleurs si vous voulez un .zip puisque j'ai rajouter des fichier de design et un userscript pour stylisé le tout) du coup j'ai pas les commentaires d'afficher o/</p><p>Merci pour tout donc, je vais appliquer tes conseil sur un deuxième script (que je vais faire sous forme de fonction) \o/ puisque le script actuel me plait tel quel o/</p><p>Ainsi j'aurais deux rendus différent et je pourrais choisir celui qui me plait le plus \o/</p><p>Donc merci pour tout !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_8">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 5 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><a target="_blank" href="http://textup.fr/175690xA">Voici mon code</a>, au cas ou quelqu'un chercherais la solution.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_9">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Cavaswaggduslip" style="background-color: rgb(147,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 5 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8702552 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8702552/1" tid_id="8702552">Cavaswaggduslip</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Yop merci Trust pour le code.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>