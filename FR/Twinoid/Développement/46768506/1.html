<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Scanner.close()</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title">Scanner.close()</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_1_c_321dba3e_8816579_100x100.gif" title="Songbird_" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 18 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8816579 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8816579/1" tid_id="8816579">Songbird_</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">IngÃ©nieur Felinophile</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonsoir,</p><p>Me revoilà pour une question dont j'ai fait plus ou moins le tour et que je ne saisis pas vraiment.</p><p>Lorsque j'instancie un objet Scanner dans une méthode, le compilateur m'alerte et me prévient que le Scanner n'est jamais fermé.</p><p>Or, lorsque j'instancie un objet Scanner dans un constructeur, il ne me fait pas la remarque.</p><p><strong>Comment manipuler le Scanner de façon à ce qu'il ne soit plus dans les logs ?</strong></p><p>Pour illustrer ma question, voilà un cas où ça cloche et que le compilo se réveille: (On fera abstraction de l'absence de déclarations vis-à-vis des variables présentes ci-dessous)</p><pre> do{
 System.out.println("Appuyez sur S pour continuer...");
 arginput = new Scanner(System.in); //arginput is never closed
 try{
 argentree = arginput.nextLine();
 }catch(NoSuchElementException e){
 e.toString();
 }
 }while(arginput.equals(null) || !arginput.equals("S") || !arginput.equals("s"));
</pre><br><p>Je vous remercie d'avance pour votre réponse,</p><p>Cordialement,</p><p>Songbird.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 18 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Et ben, je ne sais même pas de quoi tu parles ; tout juste que ça a l'air d'être du java, et encore, je me trompe peut-être.</p><p>Mais si j'étais un compilo, cad capable de savoir ce qui est fermé ou pas uniquement à partir de considérations "statiques" (analysables dès la compilation, par opposition à "dynamique" qui est ce qu'on ne peut savoir qu'en exécutant le code), moi aussi je ferais la remarque. Il est évident que tu ne fermes pas "arginput" (tu n'appelles rien qui ressemble à "arginput.close()"<strong></strong>) ; et il est évident que tu ne le feras jamais ailleurs, puisque arginput est une variable locale à ta méthode, dont toute référence sera perdue à la fin de la méthode.</p><p>Alors que dans ton constructeur, je suppose que le scanner instancié est un attribut de la classe. Enfin, je ne fais que supposer, mais en général quand on instancie des trucs dans un constructeur, c'est comme attribut. Tu ne vas pas t'amuser à scanner dans un constructeur, n'est-ce pas ?</p><p>Dans ce cas le compilo n'a aucun moyen de savoir, au moment où il compile ton constructeur, que tu as oublié de fermer le scanner. Il ne peut pas savoir ce que tu as l'intention de faire plus tard, ailleurs, dans le code.<br>Si c'était de l'ADA, il exigerait d'en avoir la preuve (tout est faux, jusqu'à preuve statique que c'est bon). Mais comme c'est du java, il se contente de la fermer (tout est bon, jusqu'à preuve statique que c'est mauvais)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_1_c_321dba3e_8816579_100x100.gif" title="Songbird_" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 19 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8816579 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8816579/1" tid_id="8816579">Songbird_</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">IngÃ©nieur Felinophile</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour,</p><p><cite>Et ben, je ne sais même pas de quoi tu parles ; tout juste que ça a l'air d'être du java, et encore, je me trompe peut-être.</cite></p><p>Mes excuses. C'est effectivement du Java.</p><p><cite> et il est évident que tu ne le feras jamais ailleurs, puisque arginput est une variable locale à ta méthode, dont toute référence sera perdue à la fin de la méthode.</cite></p><p>Oui, je sais. J'ai butté sur quelque chose de simple en fait.</p><p><cite>Alors que dans ton constructeur, je suppose que le scanner instancié est un attribut de la classe. Enfin, je ne fais que supposer, mais en général quand on instancie des trucs dans un constructeur, c'est comme attribut. Tu ne vas pas t'amuser à scanner dans un constructeur, n'est-ce pas ?</cite><br><strong>Si par scanner dans un constructeur tu entends ça</strong>:</p><pre>public Constructeur(){
 monscanner = new Scanner(System.in); // variable monscanner déclarée dans ma classe, mais initialisée dans le constructeur 

}
</pre><p>Oui, ça m'est déjà arrivé de faire ceci. Si c'est une mauvaise pratique, j'aimerais savoir pourquoi, je débute.</p><br><p><cite>Dans ce cas le compilo n'a aucun moyen de savoir, au moment où il compile ton constructeur, que tu as oublié de fermer le scanner. Il ne peut pas savoir ce que tu as l'intention de faire plus tard, ailleurs, dans le code.<br>Si c'était de l'ADA, il exigerait d'en avoir la preuve (tout est faux, jusqu'à preuve statique que c'est bon). Mais comme c'est du java, il se contente de la fermer (tout est bon, jusqu'à preuve statique que c'est mauvais)</cite></p><p>D'accord, c'est la réponse que j'attendais, merci.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_3_6_5f5566f2_148_100x100.png" title="Bugzilla" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 19 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_148 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/148/1" tid_id="148">Bugzilla</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\Dark.png" title=""/> DivinitÃ© diabolique</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Instancier un autre objet dans un constructeur n'est pas une mauvaise pratique, bien au contraire.</p><p>Par contre, utiliser cet autre objet dans le constructeur n'est généralement pas une bonne chose sauf s'il s'agit uniquement d’initialisation ou si l'objet est local au constructeur et ne persiste pas au-delà.</p><p>Ce qui m’étonne dans l'exemple donné dans le premier message, c'est que le "new Scanner(...)" se situe à l’intérieur de la boucle "do { ... } while(...)". Est-ce bien ce qui est voulu ? Cela me paraît bizarre de créer un nouveau Scanner à chaque itération de la boucle.</p><p>Il me semblerait plus logique d’exécuter "arginput = new Scanner(System.in);" juste avant le "do ..." et puis d'appeller "arginput.close();" juste après le "while(...)".</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 19 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>C'est très bien d'instancier l'attribut scanner dans le constructeur. Je ne suis pas un grand spécialiste de la programmation objet (je lutte même contre la pensée unique qui voudrait que ce soit, depuis déjà 25 ans, l'expression de la seule modernité possible), mais il me semble que c'est même ce pour quoi les constructeurs sont faits.</p><p>De toutes façons, je ne parlais pas de bonne pratique, et ne jugeais pas le code en soi (sur le sujet, ce que dit Bugzilla est plus pertinent). Je ne faisais qu'expliquer la raison pour laquelle tu observes un comportement différent du compilo quand tu mets le code dans le constructeur que quand tu le mets dans une méthode. Je suspectais, avec raison apparemment, que la différence ne venait pas tellement du fait que c'est un constructeur ou une méthode normale, mais du fait que quand tu le fais dans le constructeur, c'est un attribut, donc un truc qui continue à exister après la fin de la "méthode" (le constructeur). Alors que quand tu le fais dans une méthode normale, c'est probablement une variable locale que tu perds à la fin, sans l'avoir fermé (et même si c'était l'attribut, comme le dit Bugzilla, du moment que tu le remplace à chaque passage dans la boucle par un nouveau Scanner, tu ne risques pas de les détruire, sauf le dernier)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_1_c_321dba3e_8816579_100x100.gif" title="Songbird_" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_8816579 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/8816579/1" tid_id="8816579">Songbird_</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle">IngÃ©nieur Felinophile</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><cite>Ce qui m’étonne dans l'exemple donné dans le premier message, c'est que le "new Scanner(...)" se situe à l’intérieur de la boucle "do { ... } while(...)". Est-ce bien ce qui est voulu ? Cela me paraît bizarre de créer un nouveau Scanner à chaque itération de la boucle.</cite></p><p>Non, du tout. Je n'y ai pas fait attention. Inutile de le mettre dans la boucle, merci. <img src="../../../../gfx/square/smile.png" alt=":)" class="tid_ico"></p><p><cite>De toutes façons, je ne parlais pas de bonne pratique, et ne jugeais pas le code en soi (sur le sujet, ce que dit Bugzilla est plus pertinent). Je ne faisais qu'expliquer la raison pour laquelle tu observes un comportement différent du compilo quand tu mets le code dans le constructeur que quand tu le mets dans une méthode.</cite><br>Ca n'aurait pas été mal perçu pour autant. Les "manières" de faire peuvent toujours être perfectibles.</p><p>Je vous remercie pour vos réponses en tout cas, j'ai saisi. <img src="../../../../gfx/square/smile.png" alt=":)" class="tid_ico"></p><p>Bonne soirée à vous !</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_6">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="ayalti" style="background-color: rgb(204,171,82); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 20 juin 2015
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_36044 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/36044/1" tid_id="36044">ayalti</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Oh, j'ai aucun problème à dire ce que je pense des pratiques quand j'en pense qqc. Mais en Java, j'évite. Donc je me suis borné à répondre à "pourquoi un message dans le constructeur et pas dans une méthode", parce que c'était une question factuelle</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>