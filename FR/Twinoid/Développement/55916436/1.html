<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Php, affichage de données</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title">Php, affichage de données</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 15 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour, j'ai dans une bdd avec dedans :</p><ul><li>une table 'users' :<ul><li>'name' : le nom de l'utilisateur</li><li>'id' : l'id de l'utilisateur</li><li>'score' : le score de l'utilisateur</li></ul></li></ul><p>Je récupère les données en fonction du pseudo :</p><pre>$userposition[0] = $bdd-&gt;prepare('SELECT * FROM `users` WHERE `name` = :pseudo ORDER BY `score` DESC, `id`');
$userposition[0]-&gt;bindParam(':pseudo', $_GET['pseudo'], PDO::PARAM_STR);
$userposition[0]-&gt;execute();
$userposition[2] = $bdd-&gt;query('SELECT * FROM `users` ORDER BY `score` DESC, `id`');
if($userposition[0]-&gt;fetch()) {
echo "&lt;ul&gt;";
while ($userposition[1] = $userposition[0]-&gt;fetch()) {
$position = 1;
while ($userposition[3] = $userposition[2]-&gt;fetch()) {
 if($userposition[3]['id'] == $userposition[1]['id']) break;
 $position++;
}
echo "&lt;li&gt;#".$position." ".$userposition[1]['name']." avec un score de ".$userposition[1]['score']."&lt;/li&gt;";
}
echo "&lt;/ul&gt;";
} else {
echo "ce pseudo n'existe pas";
}
</pre><p>Quand le pseudo n'existe pas dans la bdd, j'ai bien "ce pseudo n'existe pas" qui s'affiche, quand j'en ai plusieurs avec le même pseudo j'en ai plusieurs qui s'affiche (et je ne suis pas sur s'il sont tous la ou s'il en manque)</p><p>Le probléme c'est que quand il n'y a qu'un résultat le retour est :</p><pre>&lt;ul&gt;&lt;/ul&gt;</pre><p>Sans <strong>le</strong> résultat o/</p><p>Merci d'avance pour votre aide (ou si vous avec une meilleurs façon d'obtenir le même résultat) \o/</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Farijo" style="background-color: rgb(82,118,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 15 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_19662 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/19662/1" tid_id="19662">Farijo</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_jtamer.gif" title=""/> Terroriste dans into the sky</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Salut,</p><pre>$userposition[0]-&gt;fetch()</pre><p>Cette ligne te retourne un résultat et passe au suivant. donc en faisant</p><pre>if($userposition[0]-&gt;fetch())</pre><p>tu passes au résultat suivant, et lorsque tu entres dans ta boucle tu es sur le deuxième résultat. Il faut que tu utilises une autre fonction que fetch() pour vérifier si le nombre de résultat est nul ou pas.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ok, et du coup tu propose quoi comme solution ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Natsuflame" style="background-color: rgb(204,82,118); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_4674942 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/4674942/1" tid_id="4674942">Natsuflame</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Hello,</p><p>Pourquoi ne pas utiliser simplement <a target="_blank" href="http://php.net/manual/fr/pdostatement.rowcount.php">rowCount</a> dans un 1er temps ?</p><pre>if($userposition[0]-&gt;rowCount()) {
 echo "&lt;ul&gt;";
 while ($userposition[1] = $userposition[0]-&gt;fetch()) {
 $position = 1;
 while ($userposition[3] = $userposition[2]-&gt;fetch()) {
 if($userposition[3]['id'] == $userposition[1]['id']) break;
 $position++;
 }
 echo "&lt;li&gt;#".$position." ".$userposition[1]['name']." avec un score de ".$userposition[1]['score']."&lt;/li&gt;";
 }
 echo "&lt;/ul&gt;";
} else {
echo "ce pseudo n'existe pas";
}</pre><p>Actuellement, tu utilises le fetch() qui va déjà lire le résultat, donc dans ton while, le fetch() ne se déplace pas correctement. Tu peux le faire mais dans ce cas il faut lire à l'envers les données - (tu as un exemple dans la doc <a target="_blank" href="http://php.net/manual/fr/pdostatement.fetch.php">PHP</a>)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah ouais j'avais pas pensé a ça ...</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="[9401656]" style="background-color: rgb(114,82,204); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 16 septembre 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9401656 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9401656/1" tid_id="9401656">[9401656]</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Du coup merci <span class="tid_user tid_user_19662 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="19662">Farijo</span> et <span class="tid_user tid_user_4674942 tid_userBg tid_userUnknown tid_parsed" tid_bg="1" tid_id="4674942">Natsuflame</span> pour vos réponse \o/</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>