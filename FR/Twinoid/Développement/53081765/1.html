<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>[php/sql] insert into &amp; Foreach</title>
    <link href="../../../../gfx/game/Twinoid.ico" rel="icon" type="image/gif"/>
    <link href="../../../../css/twinoid_layout.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/twinoid_bar.css" rel="stylesheet" type="text/css"/>
    <link href="../../../../css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.tid_niceHiddenNotice').click(function() {
                $(this).next('.tid_post').slideDown(500);
                $(this).slideUp(250);
            });
        });
    </script>
</head>
<body>
    <div id="contentBg">
        <div class="tid_forum_init" id="tid_forum">
            <div id="tid_forum_all"></div>
            <table class="tid_forumLayout">
                <tbody>
                    <tr>
                        <td id="tid_forum_right">
                            <div class="tid_containerWrapper">
                                <div class="tid_forumThread">
                                    <div class="tid_mainBar">
                                        <div class="tid_stack tid_bg4">
											<a class="tid_bg4" href="../../../Index.html" tid_href="left:">
												<img src="../../../../gfx/design/flag_FR.svg" style="width: 20px; height: 15px; vertical-align: middle;">
												Accueil
											</a>
                                            <a class="tid_bg4" href="../../Index.html" tid_href="left:">Twinoid</a>
                                            <a class="tid_bg4" href="../Index.html" tid_href="left:">Développement</a>
                                            <span class="tid_title"><span class="tid_forumTag tid_minor">Discussion</span>[php/sql] insert into &amp; Foreach</span>
                                        </div>
                                        
                                    </div>
                                    <div class="tid_clear tid_threadStart"></div>
                                    <div class="tid_post tid_ tid_read" id="tid_forumPost_0">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Bonjour tout le monde, <br>J'ai quelques peu un petit problème.<br>En effet (et je ne comprend pas pourquoi), je ne parvient pas a enregistrée de nombreuse donner avec ma boucle foreach.</p><p>Voici mon code source (totale) :</p><pre>&lt;?php
try {
 $bdd = new PDO('mysql:host=localhost;dbname=u171795701_ealex', 'root', '');
}
catch(Exception $e) {
 die('Erreur : '.$e-&gt;getMessage());
}

$json = '{"name": "Alexis","collections": [{"desc": "Ce stock illimité de timbres homologués par les Services Postaux Dinoziens valide votre séjour à Dinoville","name": "Timbres homologués","oid": "msg","uid": 1619187},{"desc": "La perle de la Fontaine permet à tous vos Dinoz de pouvoir se régénerer chaque jour à la Fontaine de Jouvence.","name": "Perle de la Fontaine","oid": "perle","uid": 1619187},{"desc": "Cet objet vous est offert pour avoir participé aux phases finales de la ligue Pro du 11ème Championnat des clans.\r\n\t\tCela clarifie bien les choses, il vaut mieux ne pas vous avoir comme ennemi ! La taille ne fait pas tout","name": "Tomberry","oid": "chkx2b","uid": 1619187},{"desc": "Le Trophée des Pteroz récompense les joueurs ayant vaincu le Ptéroz étrange, et donne accès aux Pteroz parmi les Dinoz disponibles dans la Boutique.","name": "Trophée des Pteroz","oid": "pteroz","uid": 1619187}],"id": 1619187}';
$json_decode = json_decode($json);

If (isset($json_decode-&gt;collections)) {
 $collections = $json_decode-&gt;collections;
 foreach($collections as $objet) {
-- $oid = $objet-&gt;oid;
-- $name = $objet-&gt;name;
-- $desc = $objet-&gt;desc;
-- $item_verifications = $bdd-&gt;prepare('SELECT * FROM ecollections WHERE oid = ?');
-- $item_verifications-&gt;execute(array($oid));
-- $donnees = $item_verifications-&gt;fetch();
-- If (!$donnees) {
--- $item_insert = $bdd-&gt;prepare('INSERT INTO ecollections (oid, name, desc) VALUES(?, ?, ?)');
--- $item_insert-&gt;execute(array($oid, $name, $desc));
--- echo 'la ligne est bien ajouter.&lt;br/&gt;';
-- }
-- Else {
--- echo "&lt;pre&gt;";
--- print_r($donnees);
--- echo "&lt;/pre&gt;";
-- }
 }
}
?&gt;</pre><p>Les symbole :</p><pre>--- 
et
--
</pre><p>On été rajouter pour garder une mise en forme "propre".</p><p>Voici donc ma question, pourquoi rien ne s'enregistre dans ma bdd ?<br>Et quel codes mettriez vous a la place du bien pour remplir le même fonctionnement ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_1">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Jkratos95" style="background-color: rgb(204,82,182); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_19751 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/19751/1" tid_id="19751">Jkratos95</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Tu n'aurais pas oublié qu'avec json_decode , tu dois avoir un paramètre à true pour renvoyer un tableau associatif ?</p><p>Par exemple</p><p><cite>$json_decode = json_decode($json,true);</cite></p><p>et donc pour accéder à un élément :</p><p><cite>$json_decode["name"]</cite></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_2">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p><span class="tid_wspoil">Coupain :cu<em></em>te:</span><br>Quand tu modifie légèrement mon code par :</p><pre>&lt;?php
$json = '{"name": "Alexis","collections": [{"desc": "Ce stock illimité de timbres homologués par les Services Postaux Dinoziens valide votre séjour à Dinoville","name": "Timbres homologués","oid": "msg","uid": 1619187},{"desc": "La perle de la Fontaine permet à tous vos Dinoz de pouvoir se régénerer chaque jour à la Fontaine de Jouvence.","name": "Perle de la Fontaine","oid": "perle","uid": 1619187},{"desc": "Cet objet vous est offert pour avoir participé aux phases finales de la ligue Pro du 11ème Championnat des clans.\r\n\t\tCela clarifie bien les choses, il vaut mieux ne pas vous avoir comme ennemi ! La taille ne fait pas tout","name": "Tomberry","oid": "chkx2b","uid": 1619187},{"desc": "Le Trophée des Pteroz récompense les joueurs ayant vaincu le Ptéroz étrange, et donne accès aux Pteroz parmi les Dinoz disponibles dans la Boutique.","name": "Trophée des Pteroz","oid": "pteroz","uid": 1619187}],"id": 1619187}';
$json_decode = json_decode($json);

If (isset($json_decode-&gt;collections)) {
 $collections = $json_decode-&gt;collections;
 foreach($collections as $objet) {
 $oid = $objet-&gt;oid;
 $name = $objet-&gt;name;
 $desc = $objet-&gt;desc;
 echo $oid."&lt;br/&gt;";
 echo $name."&lt;br/&gt;";
 echo $desc."&lt;br/&gt;&lt;br/&gt;";
 }
 }
?&gt;</pre><p>ça affiche :</p><pre>msg
Timbres homologuÃ©s
Ce stock illimitÃ© de timbres homologuÃ©s par les Services Postaux Dinoziens valide votre sÃ©jour Ã Dinoville

perle
Perle de la Fontaine
La perle de la Fontaine permet Ã tous vos Dinoz de pouvoir se rÃ©gÃ©nerer chaque jour Ã la Fontaine de Jouvence.

chkx2b
Tomberry
Cet objet vous est offert pour avoir participÃ© aux phases finales de la ligue Pro du 11Ã¨me Championnat des clans. Cela clarifie bien les choses, il vaut mieux ne pas vous avoir comme ennemi ! La taille ne fait pas tout

pteroz
TrophÃ©e des Pteroz
Le TrophÃ©e des Pteroz rÃ©compense les joueurs ayant vaincu le PtÃ©roz Ã©trange, et donne accÃ¨s aux Pteroz parmi les Dinoz disponibles dans la Boutique.
</pre><p>J'en avais donc déduit qu'il suffisais d'enregistrer les donné dans la bdd plutôt que de les afficher ^^</p><p>Notes, et même avec True dans le decode_json, il n'y as rien qui s'enregistre dans la bdd ...</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_3">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Voici le nouveau code obtenue avec le true :</p><pre>&lt;?php
try {
 $bdd = new PDO('mysql:host=localhost;dbname=edino', 'root', '');
}
catch(Exception $e) {
 die('Erreur : '.$e-&gt;getMessage());
}
$json = '{"name": "Alexis","collections": [{"desc": "Ce stock illimité de timbres homologués par les Services Postaux Dinoziens valide votre séjour à Dinoville","name": "Timbres homologués","oid": "msg","uid": 1619187},{"desc": "La perle de la Fontaine permet à tous vos Dinoz de pouvoir se régénerer chaque jour à la Fontaine de Jouvence.","name": "Perle de la Fontaine","oid": "perle","uid": 1619187},{"desc": "Cet objet vous est offert pour avoir participé aux phases finales de la ligue Pro du 11ème Championnat des clans.\r\n\t\tCela clarifie bien les choses, il vaut mieux ne pas vous avoir comme ennemi ! La taille ne fait pas tout","name": "Tomberry","oid": "chkx2b","uid": 1619187},{"desc": "Le Trophée des Pteroz récompense les joueurs ayant vaincu le Ptéroz étrange, et donne accès aux Pteroz parmi les Dinoz disponibles dans la Boutique.","name": "Trophée des Pteroz","oid": "pteroz","uid": 1619187}],"id": 1619187}';
$json_decode = json_decode($json,true);

If (isset($json_decode['collections'])) {
$collections = $json_decode['collections'];
foreach($collections as $objet) {
$oid = $objet['oid'];
$name = $objet['name'];
$desc = $objet['desc'];
$item_verifications = $bdd-&gt;prepare('SELECT * FROM ecollections WHERE oid = ?');
 $item_verifications-&gt;execute(array($oid));
 $donnees = $item_verifications-&gt;fetch();
 If (!$donnees) {
 $item_insert = $bdd-&gt;prepare('INSERT INTO ecollections (oid, name, desc) VALUES(?, ?, ?)');
 $item_insert-&gt;execute(array($oid, $name, $desc));
 echo 'la ligne est bien ajouter.&lt;br/&gt;';
 }
 Else {
 echo "&lt;pre&gt;";
 print_r($donnees);
 echo "&lt;/pre&gt;";
 }
}
}
Else {
 echo "&lt;pre&gt;";
 print_r($json_decode);
 echo "&lt;/pre&gt;";
}
?&gt;</pre><p>Et comme dit juste avant, rien ne s'enregistre dans la bdd.<br>Notes, comme vous pouvez le constater j'ai changer de bdd pour tester si c'est la bdd qui fonctionne pas ... sauf que c'est pas la bdd.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_4">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Par défaut le PDO te signale pas les erreurs SQL. Ajoute ceci avant de faire tes requêtes :</p><pre>$bdd-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</pre>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_5">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Juste avant chaque requête ?<br>Ou je ne met ça qu'une seule fois ?</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_6">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ok, quand je fait :</p><pre>&lt;?php
try {
 /* ║ */ $bdd = new PDO('mysql:host=localhost;dbname=edino', 'root', ''); /* ║ */
}
catch(Exception $e) {
 die('Erreur : '.$e-&gt;getMessage());
}
$bdd-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$json = '{"name": "Alexis","collections": [{"desc": "Ce stock illimité de timbres homologués par les Services Postaux Dinoziens valide votre séjour à Dinoville","name": "Timbres homologués","oid": "msg","uid": 1619187},{"desc": "La perle de la Fontaine permet à tous vos Dinoz de pouvoir se régénerer chaque jour à la Fontaine de Jouvence.","name": "Perle de la Fontaine","oid": "perle","uid": 1619187},{"desc": "Cet objet vous est offert pour avoir participé aux phases finales de la ligue Pro du 11ème Championnat des clans.\r\n\t\tCela clarifie bien les choses, il vaut mieux ne pas vous avoir comme ennemi ! La taille ne fait pas tout","name": "Tomberry","oid": "chkx2b","uid": 1619187},{"desc": "Le Trophée des Pteroz récompense les joueurs ayant vaincu le Ptéroz étrange, et donne accès aux Pteroz parmi les Dinoz disponibles dans la Boutique.","name": "Trophée des Pteroz","oid": "pteroz","uid": 1619187}],"id": 1619187}';
$json_decode = json_decode($json,true);

If (isset($json_decode['collections'])) {
$collections = $json_decode['collections'];
foreach($collections as $objet) {
$oid = $objet['oid'];
$name = $objet['name'];
$desc = $objet['desc'];
$item_verifications = $bdd-&gt;prepare('SELECT * FROM ecollections WHERE oid = ?');
 $item_verifications-&gt;execute(array($oid));
 $donnees = $item_verifications-&gt;fetch();
 If (!$donnees) {
 $item_insert = $bdd-&gt;prepare('INSERT INTO ecollections (oid, name, desc) VALUES(?, ?, ?)');
 $item_insert-&gt;execute(array($oid, $name, $desc));
 echo 'la ligne est bien ajouter.&lt;br/&gt;';
 }
 Else {
 echo "&lt;pre&gt;";
 print_r($donnees);
 echo "&lt;/pre&gt;";
 }
}
}
Else {
 echo "&lt;pre&gt;";
 print_r($json_decode);
 echo "&lt;/pre&gt;";
}
?&gt;</pre><p>ça m'affiche :</p><pre>Fatal error: in C:\wamp\www\test.php on line 23</pre>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_7">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>La ligne 23 c'est celle-là ?</p><pre>$item_insert-&gt;execute(array($oid, $name, $desc));</pre><p><em>Edit : </em> ajoute un try-catch autour :</p><pre>try {
 …
} catch (PDOException $e) {
 die('Erreur SQL : ' . $e-&gt;message);
}</pre><p><em>Re-edit : </em><br><cite>Juste avant chaque requête ?<br>Ou je ne met ça qu'une seule fois ?</cite><br>Une seule fois tant que tu utilises le même objet PDO <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_8">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>ça donne ce nouveau code :</p><pre>&lt;?php
try {
 /* ║ */ $bdd = new PDO('mysql:host=localhost;dbname=edino', 'root', ''); /* ║ */
}
catch(Exception $e) {
 die('Erreur : '.$e-&gt;getMessage());
}
$bdd-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$json = '{"name": "Alexis","collections": [{"desc": "Ce stock illimité de timbres homologués par les Services Postaux Dinoziens valide votre séjour à Dinoville","name": "Timbres homologués","oid": "msg","uid": 1619187},{"desc": "La perle de la Fontaine permet à tous vos Dinoz de pouvoir se régénerer chaque jour à la Fontaine de Jouvence.","name": "Perle de la Fontaine","oid": "perle","uid": 1619187},{"desc": "Cet objet vous est offert pour avoir participé aux phases finales de la ligue Pro du 11ème Championnat des clans.\r\n\t\tCela clarifie bien les choses, il vaut mieux ne pas vous avoir comme ennemi ! La taille ne fait pas tout","name": "Tomberry","oid": "chkx2b","uid": 1619187},{"desc": "Le Trophée des Pteroz récompense les joueurs ayant vaincu le Ptéroz étrange, et donne accès aux Pteroz parmi les Dinoz disponibles dans la Boutique.","name": "Trophée des Pteroz","oid": "pteroz","uid": 1619187}],"id": 1619187}';
$json_decode = json_decode($json,true);

If (isset($json_decode['collections'])) {
$collections = $json_decode['collections'];
foreach($collections as $objet) {
$oid = $objet['oid'];
$name = $objet['name'];
$desc = $objet['desc'];
$item_verifications = $bdd-&gt;prepare('SELECT * FROM ecollections WHERE oid = ?');
 $item_verifications-&gt;execute(array($oid));
 $donnees = $item_verifications-&gt;fetch();
 If (!$donnees) {
 $item_insert = $bdd-&gt;prepare('INSERT INTO ecollections (oid, name, desc) VALUES(?, ?, ?)');
 try {
 $item_insert-&gt;execute(array($oid, $name, $desc));
 }
 catch (PDOException $e) {
 die('Erreur SQL : ' . $e-&gt;message);
 }
 
 echo 'la ligne est bien ajouter.&lt;br/&gt;';
 }
 Else {
 echo "&lt;pre&gt;";
 print_r($donnees);
 echo "&lt;/pre&gt;";
 }
}
}
Else {
 echo "&lt;pre&gt;";
 print_r($json_decode);
 echo "&lt;/pre&gt;";
}
?&gt;</pre><p>Et ça nous donne :</p><pre>Fatal error: Cannot access protected property PDOException::$message in C:\wamp\www\test.php on line 27</pre><p>Et la ligne 27 est :</p><pre>die('Erreur SQL : ' . $e-&gt;message);</pre>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_9">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah oui excuse-moi, je donne des conseils pourris <img src="../../../../gfx/square/facepalm.png" alt=":fp:" class="tid_ico"><br>C'est</p><pre>$e-&gt;getMessage()</pre><p>^^″</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_10">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>ça fonctionne de suite mieux, ça m'affiche :</p><pre>Erreur SQL : SQLSTATE[42000]: Syntax error or access violation: 1064 Erreur de syntaxe près de 'desc) VALUES('msg', 'Timbres homologuÃ©s', 'Ce stock illimitÃ© de timbres ho' à la ligne 1</pre>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_11">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah bah oui, DESC est un mot-clé SQL <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"> Faut que tu changes le nom de la colonne. Ou alors essaye en mettant des <em>backticks</em> :</p><pre>`desc`</pre>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_12">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>C'est pour ça que je ne comprenais pas ou était l'erreur, (j'ai appris le php en autodidacte, je n'avais donc pas connaissance de ce mot clé ^^)</p><p><a target="_blank" href="http://ealexis.16mb.com/edino/?sk=accueil">Et ça fonctionne !</a></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_13">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Cool !</p><p>DESC ça va avec ORDER BY. Par défaut c'est ASC, ça veut dire « ascendant », autrement dit rangé dans l'ordre croissant, et si tu mets DESC ça fait « descendant », décroissant.</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_14">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\twinoid_4_0_f5d99714_9079946_100x100.png" title="Alexis" style="background-color: ; width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_9079946 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/9079946/1" tid_id="9079946">Alexis</a>
        </div>
        <div class="tid_title">
            <span class="tid_userTitle"><img alt="[?]" src="..\..\..\..\gfx\icons\r_cwater.gif" title=""/> Con en visite</span>
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>Ah oui c'est vrais, je n'y avais pas pensé !<br>Merci pour les précision (j'me coucherais moins stupide ce soir :3)</p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div><div class="tid_post tid_ tid_read" id="tid_forumPost_15">
    <div class="tid_header tid_bg1">
        <div class="tid_floatBox">
            <table class="tid_valign" style="width : 80px">
                <tbody>
                    <tr>
                        <td>
                            <div class="tid_twinoidAvatar" style="width:80px; max-height:80px; height:80px;">
                                <img src="..\..\..\..\gfx\avatars\img_defaultAvatar.png" title="Watilin" style="background-color: rgb(82,204,157); width: 80px;">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tid_date">
            Le 28 février 2016
        </div>
        <div class="tid_name">
            <a class="tid_user tid_user_378517 tid_userNoBg tid_userFriend tid_parsed" href="//twinoid.com/user/go/378517/1" tid_id="378517">Watilin</a>
        </div>
        <div class="tid_title">
            
        </div>
        <div class="tid_clearRight"></div>
    </div>
    <div class="tid_body tid_bg2">
        <div class="tid_arrow"></div>
        <div class="tid_originContent">
            <div class="tid_editorContent tid_parsed">
                <p>De rien <img src="../../../../gfx/square/wink.png" alt=";)" class="tid_ico"></p>
            </div>
        </div>
        <div class="tid_clear"></div>
    </div>
</div>
                                    <div id="tid_forumReplyForm" style="display: none"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>